<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2017-02-16 Thu 17:43 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Shell</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Hebi Li" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<style>
a:visited {color: red;}
</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class^="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"]:before {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"] {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"]:before {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"]:before {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"]:before {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"]:before {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"]:before {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"]:before {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"]:before {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"]:before {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"]:before {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"]:before {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"]:before {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"]:before {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"]:before {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"]:before {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"]:before {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"]:before {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"]:before {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"]:before {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"]:before {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"]:before {color: black;}</style>
<style type="text/css">
 pre.src {background-color: #01331c; color: #F8F8F2;}</style>
<style type="text/css">
 code {background-color: lightgrey;}</style>
<style type="text/css">
 pre[class*="src-"]:before {color: black;}</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Shell</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org7765f0d">1. Concepts</a>
<ul>
<li><a href="#org2b14235">1.1. Command Interaction</a></li>
<li><a href="#org1901ca5">1.2. redirection</a></li>
</ul>
</li>
<li><a href="#orgb9e7441">2. expansion</a>
<ul>
<li><a href="#orgb0dfb0c">2.1. parameter and variable expansion</a>
<ul>
<li><a href="#orga49c1ee">2.1.1. special parameters</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgbf67524">3. IO</a></li>
<li><a href="#org35f842c">4. Control Flow</a>
<ul>
<li><a href="#org9a16e6d">4.1. Condition commands</a>
<ul>
<li><a href="#orge87c2f7">4.1.1. bash conditional expression</a></li>
</ul>
</li>
<li><a href="#org2dde0f1">4.2. Conditional</a></li>
<li><a href="#org3e88e27">4.3. loop</a></li>
</ul>
</li>
<li><a href="#org4ce5aff">5. function</a></li>
<li><a href="#orgbe15f68">6. Tips</a>
<ul>
<li><a href="#org46e1387">6.1. Check whether a command exists</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org7765f0d" class="outline-2">
<h2 id="org7765f0d"><span class="section-number-2">1</span> Concepts</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-org2b14235" class="outline-3">
<h3 id="org2b14235"><span class="section-number-3">1.1</span> Command Interaction</h3>
<div class="outline-text-3" id="text-1-1">
<p>
The first type of interaction is pipeline.
<code>&lt;cmd1&gt; | &lt;cmd2&gt;</code>, Each command execute in its own sub-shell.
The exit status of a pipeline is the exist status of the last command.
<code>&lt;cmd1&gt; |&amp; &lt;cmd2&gt;</code> is short hand for <code>&lt;cmd1&gt; 2&gt;&amp;1 | &lt;cmd2&gt;</code>.
</p>

<p>
Commands separated by <code>;</code> are executed sequentially.
The shell waits for each to terminate in turn.
The return status of last one is returned.
</p>

<p>
<code>&amp;&amp;</code> and <code>||</code> have a higher precedence than <code>;</code>.
The later command is executed based on the return result of previous one.
The return status is the last executed command.
</p>

<p>
Grouping of command is different.
The grouping can be done by <code>()</code> and <code>{}</code>.
<code>()</code> will create a sub-shell and execute the body commands,
while <code>{}</code> will not create sub-shell. The last command in the body MUST terminate with <code>;</code>.
</p>
</div>
</div>

<div id="outline-container-org1901ca5" class="outline-3">
<h3 id="org1901ca5"><span class="section-number-3">1.2</span> redirection</h3>
<div class="outline-text-3" id="text-1-2">
<ul class="org-ul">
<li><code>ls &gt; dirlist 2&gt;&amp;1</code></li>
<li><code>&amp;&gt;word</code> is the same as <code>&gt;word 2&gt;&amp;1</code></li>
<li><code>&amp;&gt;&gt;word</code> is the same as <code>&gt;&gt;word 2&gt;&amp;1</code></li>
</ul>

<p>
<i>Here document</i> is of the form:
</p>
<pre class="example">
cmd &lt;&lt; AUniqueString
any thing
interesting
AUniqueString
</pre>

<p>
The start and end unique string must be same and must not appear in the body.
The block will be used as the input to the command.
Similarly, the <i>here string</i> is used by:
</p>
<pre class="example">
cmd &lt;&lt;&lt; $word
</pre>

<p>
And the expansion of word will be used as the input.
</p>
</div>
</div>
</div>

<div id="outline-container-orgb9e7441" class="outline-2">
<h2 id="orgb9e7441"><span class="section-number-2">2</span> expansion</h2>
<div class="outline-text-2" id="text-2">
<p>
There are seven kinds of expansions, in order of expansion order.
After these expansion are performed, the <code>quote removal</code> are performed.
</p>
<dl class="org-dl">
<dt>brace</dt><dd><code>/usr/local/{old,new,dist}</code> will expands to three strings.</dd>
<dt>tilde</dt><dd>home</dd>
<dt>parameter and variable</dt><dd>in separate section</dd>
<dt>arithmetic</dt><dd></dd>

<dt>command substitution</dt><dd>using <code>$()</code> or <code>`cmd`</code>. The value is the output of the command, with any trailing newlines deleted.</dd>
<dt>word splitting</dt><dd>The shell treats each character of '$IFS' as a delimiter.
If 'IFS' is unset, or its value is exactly <code>&lt;space&gt;&lt;tab&gt;&lt;newline&gt;</code>.</dd>
<dt>filename</dt><dd>The file must exists to be expanded.
<code>*</code> matches any string, including null string.
<code>?</code> matches a single character.
<code>[..]</code> matches any one of those.</dd>
</dl>
</div>

<div id="outline-container-orgb0dfb0c" class="outline-3">
<h3 id="orgb0dfb0c"><span class="section-number-3">2.1</span> parameter and variable expansion</h3>
<div class="outline-text-3" id="text-2-1">
<ul class="org-ul">
<li><code>${var:-word}</code>: if var is unset or null, the value is expansion of word</li>
<li><code>${var:=word}</code>: if var is unset or null, the expansion of word is assigned to var</li>
</ul>

<p>
Meta data:
</p>
<ul class="org-ul">
<li><code>${#var}</code>: return length in character of the expansion of var</li>
</ul>

<p>
Sub-string:
</p>
<ul class="org-ul">
<li><code>${str:offset}</code>: substr from offset to end</li>
<li><code>${str:offset:length}</code>: substr from offset for count characters</li>
</ul>

<p>
String trimming
pattern is first expanded, then remove the shortest or longest match from the beginning or tailing of str.
Return the value, leave str unchanged.
</p>
<dl class="org-dl">
<dt><code>${str#word}</code></dt><dd><i>shortest</i>, beginning</dd>
<dt><code>${str##word}</code></dt><dd>longest, beginning</dd>
<dt><code>${str%word}</code></dt><dd>shortest, tailing</dd>
<dt><code>${str%%word}</code></dt><dd>longest, tailing</dd>
</dl>

<p>
Replacing
</p>
<ul class="org-ul">
<li><code>${str/pattern/string}</code>: the first longest match is replaced with string
if pattern begins with:
<ul class="org-ul">
<li><code>/</code>: all matched is replaced</li>
<li><code>#</code>: match must happen in the begin</li>
<li><code>%</code>: match must happen in the tail</li>
</ul></li>
</ul>

<p>
Case changing
match of pattern will change case
</p>
<ul class="org-ul">
<li><code>${str^pattern}</code>: one match, lowercase to uppercase</li>
<li><code>${str^^pattern}</code>: all match, lower to upper</li>
<li><code>${str,pattern}</code>: one match, upper to lower</li>
<li><code>${str,,pattern}</code>: all match, upper to lower</li>
</ul>
</div>
<div id="outline-container-orga49c1ee" class="outline-4">
<h4 id="orga49c1ee"><span class="section-number-4">2.1.1</span> special parameters</h4>
<div class="outline-text-4" id="text-2-1-1">
<ul class="org-ul">
<li><code>$*</code>: "$1c$2c$3c&#x2026;", c is the first character of $IFS (defaults to space)</li>
<li><code>$@</code>: "$1" "$2" "$3" &#x2026;</li>
<li><code>$#</code>: the number of positional parameters, for <code>a.out -h</code> it is 1</li>
<li><code>$?</code>: exit status</li>
<li id="<code>$n</code>">the nth parameter</li>

<li><code>$-</code>: current option flags</li>
<li><code>$$</code>: process ID of the shell</li>
<li><code>$!</code>: process ID of the job most recently placed into the background</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-orgbf67524" class="outline-2">
<h2 id="orgbf67524"><span class="section-number-2">3</span> IO</h2>
<div class="outline-text-2" id="text-3">
<p>
The loop can accept the redirection, thus can be used to read a file:
</p>
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #F92672;">while </span><span style="color: #F92672;">read</span> -r line; <span style="color: #F92672;">do</span>
    <span style="color: #75715E;"># </span><span style="color: #75715E;">some job</span>
<span style="color: #F92672;">done</span> &lt; papers.txt
</pre>
</div>

<p>
The ordinary reading from command line:
</p>
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #F92672;">read</span> -p <span style="color: #E6DB74;">"please input: "</span> a b c
</pre>
</div>

<p>
When using <code>echo</code>, use <code>-e</code> option can print out control characters such as <code>\n</code>.
</p>
</div>
</div>

<div id="outline-container-org35f842c" class="outline-2">
<h2 id="org35f842c"><span class="section-number-2">4</span> Control Flow</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-org9a16e6d" class="outline-3">
<h3 id="org9a16e6d"><span class="section-number-3">4.1</span> Condition commands</h3>
<div class="outline-text-3" id="text-4-1">
<p>
<code>[</code>  and <code>]</code> are used to evaluate a conditional expression.
Expressions can be combined by: <code>!</code>, <code>()</code>, <code>-a</code>, <code>-o</code>.
</p>

<p>
<code>((...))</code> will cause the expression to be evaluated by shell arithmetic.
<i>If the value of the expression is non-0, the return status is 0, which is wired.</i>
</p>

<p>
<code>[[]]</code> will return 0 or 1, depending on the evaluation of the <i>conditional expression inside</i>.
The <i>bash conditional expressions</i> are the table done below.
</p>

<p>
The expression will performs some transformation.
Not-performed:
</p>
<ul class="org-ul">
<li><i>Word splitting</i></li>
<li><i>filename expansion</i></li>
</ul>

<p>
Performed:
</p>
<ul class="org-ul">
<li><i>tilde expansion</i></li>
<li>parameter and variable expansion</li>
<li>arithmetic expansion</li>
<li>command substitution</li>
<li>process substitution</li>
<li>quote removal</li>
</ul>

<p>
When using <code>==</code> to compare string, the right hand side string is considered as a pattern,
and the operation performed is pattern matching, as described in filename expansion.
</p>

<p>
The expression can be used with some operators:
</p>
<dl class="org-dl">
<dt><code>(exp)</code></dt><dd>only add the precedence</dd>
<dt><code>!exp</code></dt><dd>negate</dd>
<dt><code>exp &amp;&amp; exp</code></dt><dd>and</dd>
<dt><code>exp || exp</code></dt><dd>or</dd>
</dl>
</div>

<div id="outline-container-orge87c2f7" class="outline-4">
<h4 id="orge87c2f7"><span class="section-number-4">4.1.1</span> bash conditional expression</h4>
<div class="outline-text-4" id="text-4-1-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />
</colgroup>

<colgroup>
<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">expr</th>
<th scope="col" class="org-left">meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>-f file</code></td>
<td class="org-left">file exists and is regular file</td>
</tr>

<tr>
<td class="org-left"><code>-d file</code></td>
<td class="org-left">file exists and is directory</td>
</tr>

<tr>
<td class="org-left"><code>-a file</code></td>
<td class="org-left">file exists</td>
</tr>

<tr>
<td class="org-left"><code>-s file</code></td>
<td class="org-left">file exists and size &gt; 0</td>
</tr>

<tr>
<td class="org-left"><code>-L &lt;file&gt;</code></td>
<td class="org-left">symbolic link</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>-r &lt;file&gt;</code></td>
<td class="org-left">readable</td>
</tr>

<tr>
<td class="org-left"><code>-w &lt;file&gt;</code></td>
<td class="org-left">writable</td>
</tr>

<tr>
<td class="org-left"><code>-x &lt;file&gt;</code></td>
<td class="org-left">executable</td>
</tr>

<tr>
<td class="org-left"><code>&lt;file1&gt; -nt &lt;file2&gt;</code></td>
<td class="org-left">newer than?</td>
</tr>

<tr>
<td class="org-left"><code>&lt;file1&gt; -ot &lt;file2&gt;</code></td>
<td class="org-left">older than?</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>-z string</code></td>
<td class="org-left">string is empty</td>
</tr>

<tr>
<td class="org-left"><code>-n string</code></td>
<td class="org-left">string is not empty</td>
</tr>

<tr>
<td class="org-left"><code>string1 == string2</code></td>
<td class="org-left">equal</td>
</tr>

<tr>
<td class="org-left"><code>string1 != string2</code></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-org2dde0f1" class="outline-3">
<h3 id="org2dde0f1"><span class="section-number-3">4.2</span> Conditional</h3>
<div class="outline-text-3" id="text-4-2">
<p>
The <code>if</code> clause signature is <code>if ; then ; elif ; then ; else ; fi</code>.
The test command is not a condition, but a command.
The return code of the command is used as the condition.
If the command returns 0, the body is executed.
Non-zero will perform the <code>else</code> clause.
</p>

<p>
<code>case</code> signature is: <code>case word in p1) cmd;; p2) cmd;; esac</code>
The word undergoes
</p>
<ul class="org-ul">
<li>tilde expansion</li>
<li>parameter expansion</li>
<li>command substitution</li>
<li>arithmetic expansion
<ul class="org-ul">
<li>quote removal</li>
</ul></li>
</ul>

<p>
Use <code>*</code> as the default pattern.
Patterns can be combined with <code>|</code>.
</p>

<p>
Each case must be terminated by <code>;;</code>, <code>;&amp;</code> or <code>;;&amp;</code>.
</p>
<dl class="org-dl">
<dt><code>;;</code></dt><dd>no other matches are attempted</dd>
<dt><code>;&amp;</code></dt><dd>continue with the next clause, without even evaluate the match</dd>
<dt><code>;;&amp;</code></dt><dd>test next pattern</dd>
</dl>
</div>
</div>

<div id="outline-container-org3e88e27" class="outline-3">
<h3 id="org3e88e27"><span class="section-number-3">4.3</span> loop</h3>
<div class="outline-text-3" id="text-4-3">
<p>
As for other languages, <code>break</code> and <code>continue</code> can be used.
</p>
<dl class="org-dl">
<dt><code>until cond; do cmd; done</code></dt><dd></dd>

<dt><code>while cond; do cmd; done</code></dt><dd></dd>

<dt><code>for name in words; do cmd; done</code></dt><dd>the words can be <code>{1..10}</code>, <code>$(seq 1 10)</code></dd>
<dt><code>for ((i=0;i&lt;10;i++)); do cmd; done</code></dt><dd></dd>
</dl>
</div>
</div>
</div>

<div id="outline-container-org4ce5aff" class="outline-2">
<h2 id="org4ce5aff"><span class="section-number-2">5</span> function</h2>
<div class="outline-text-2" id="text-5">
<p>
The function has two methods to declare, use the name and a pair of parenthesis, and the function keyword with optional parenthesis.
I found using function keyword and NO parenthesis is the best because:
</p>
<ul class="org-ul">
<li>the function keyword tells me it is function, very explicitly</li>
<li>the parenthesis is not going to accept parameter, thus it causes confusion.</li>
</ul>
<p>
So in a word, use: <code>function foo {}</code>
</p>

<p>
A function declaration can be removed by <code>unset -f</code>.
The argument of the function uses the same way for the argument to the script, the propositional special variables.
And the call to the function is used as if it is a command.
</p>

<p>
Want the return value? The <code>return</code> statement will only set the <i>return code</i> of the command.
Echo the result and assign the result to a variable may be a choice, but I found it not good because the body might echo something as well.
</p>
</div>
</div>

<div id="outline-container-orgbe15f68" class="outline-2">
<h2 id="orgbe15f68"><span class="section-number-2">6</span> Tips</h2>
<div class="outline-text-2" id="text-6">
<ul class="org-ul">
<li><code>source</code> will be in effect in current shell session, but not the sub-shells</li>
<li><code>export</code> declare global variable, and will be in effect in sub-shells</li>
</ul>
</div>
<div id="outline-container-org46e1387" class="outline-3">
<h3 id="org46e1387"><span class="section-number-3">6.1</span> Check whether a command exists</h3>
<div class="outline-text-3" id="text-6-1">
<p>
Do not use <code>which</code>, it is expensive, and the return value is not well defined.
Use <code>hash</code> for commands and <code>type</code> when considering built-in and keywords. <sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="color: #F92672;">type</span> foo &gt;/dev/null 2&gt;&amp;1 || 
    <span style="color: #AE81FF;">{</span> <span style="color: #F92672;">echo</span> &gt;&amp;2 <span style="color: #E6DB74;">"I require foo but it's not installed.  Aborting."</span>; <span style="color: #F92672;">exit</span> 1; <span style="color: #AE81FF;">}</span>
<span style="color: #F92672;">hash</span> foo 2&gt;/dev/null ||
    <span style="color: #AE81FF;">{</span> <span style="color: #F92672;">echo</span> &gt;&amp;2 <span style="color: #E6DB74;">"I require foo but it's not installed.  Aborting."</span>; <span style="color: #F92672;">exit</span> 1; <span style="color: #AE81FF;">}</span>
</pre>
</div>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
<a href="http://stackoverflow.com/questions/592620/check-if-a-program-exists-from-a-bash-script">http://stackoverflow.com/questions/592620/check-if-a-program-exists-from-a-bash-script</a>
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="author">Author: Hebi Li</p>
<p class="date">Created: 2017-02-16 Thu 17:43</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
