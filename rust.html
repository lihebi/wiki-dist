<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2017-12-07 Thu 15:13 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Rust Lang</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Hebi Li" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="assets/hebi.css" /><link rel="stylesheet" type="text/css" href="assets/test.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2017 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Rust Lang</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgc95c015">1. <span class="todo TODO">TODO</span> More In the Book</a></li>
<li><a href="#orgc72c1ec">2. <span class="todo TODO">TODO</span> the library reference</a></li>
<li><a href="#org41914a0">3. Why Rust a.k.a. features</a>
<ul>
<li><a href="#orgedebf67">3.1. <span class="todo TODO">TODO</span> know how to describe the feature</a></li>
</ul>
</li>
<li><a href="#orgc5ecf92">4. Reference</a></li>
<li><a href="#org669fc50">5. Environment Setup</a></li>
<li><a href="#orgdcd5edc">6. Compile</a></li>
<li><a href="#orgc070c6c">7. Misc</a></li>
<li><a href="#org2e326f6">8. Statement and expression</a></li>
<li><a href="#orgd0331c6">9. function</a></li>
<li><a href="#org98b853c">10. import</a></li>
<li><a href="#orgfa324d1">11. variable</a>
<ul>
<li><a href="#org2ef7940">11.1. Variable</a></li>
<li><a href="#orgf7608e5">11.2. Constant</a></li>
<li><a href="#org7ac2be8">11.3. Reference</a></li>
</ul>
</li>
<li><a href="#org2888ffd">12. Type</a>
<ul>
<li><a href="#org3734553">12.1. Scalar type</a>
<ul>
<li><a href="#org410c203">12.1.1. Integer</a></li>
<li><a href="#org8f0c361">12.1.2. float</a></li>
<li><a href="#org586fd5c">12.1.3. boolean</a></li>
<li><a href="#orga86e1c8">12.1.4. character</a></li>
</ul>
</li>
<li><a href="#org122446f">12.2. Compound type</a>
<ul>
<li><a href="#org3363d79">12.2.1. tuple</a></li>
<li><a href="#org55fa0d5">12.2.2. array</a></li>
</ul>
</li>
<li><a href="#orgabff320">12.3. String</a></li>
<li><a href="#orgf827bf3">12.4. Result</a></li>
</ul>
</li>
<li><a href="#org2b34a0a">13. Ownership</a>
<ul>
<li><a href="#orgb2d4397">13.1. Reference</a></li>
<li><a href="#org38f72e4">13.2. Slice</a></li>
</ul>
</li>
<li><a href="#orgd3714dc">14. control flow</a>
<ul>
<li><a href="#orga4cde2e">14.1. match</a></li>
<li><a href="#org42e2f48">14.2. loop</a></li>
<li><a href="#org0c5c044">14.3. while</a></li>
<li><a href="#org0b9e54f">14.4. for</a></li>
<li><a href="#org9ad9cef">14.5. if</a></li>
</ul>
</li>
<li><a href="#orgdf5b73d">15. Standard Library</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgc95c015" class="outline-2">
<h2 id="orgc95c015"><span class="section-number-2">1</span> <span class="todo TODO">TODO</span> More In the Book</h2>
</div>
<div id="outline-container-orgc72c1ec" class="outline-2">
<h2 id="orgc72c1ec"><span class="section-number-2">2</span> <span class="todo TODO">TODO</span> the library reference</h2>
</div>

<div id="outline-container-org41914a0" class="outline-2">
<h2 id="org41914a0"><span class="section-number-2">3</span> Why Rust a.k.a. features</h2>
<div class="outline-text-2" id="text-3">
<p>
Focus:
</p>
<ul class="org-ul">
<li>Safety</li>
<li>Speed</li>
<li>concurrency</li>
<li>low level control &amp; high level abstraction</li>
</ul>

<p>
What I understand:
</p>
<ul class="org-ul">
<li>move semantics</li>
<li>guaranteed memory safety</li>
<li>threads without data races</li>
<li>type inference</li>
<li>minimal runtime</li>
<li>efficient C bindings</li>
</ul>

<p>
Not understand yet:
</p>
<ul class="org-ul">
<li>zero-cost abstractions</li>
<li>trait-based generics</li>
<li>pattern matching</li>
</ul>
</div>

<div id="outline-container-orgedebf67" class="outline-3">
<h3 id="orgedebf67"><span class="section-number-3">3.1</span> <span class="todo TODO">TODO</span> know how to describe the feature</h3>
</div>
</div>

<div id="outline-container-orgc5ecf92" class="outline-2">
<h2 id="orgc5ecf92"><span class="section-number-2">4</span> Reference</h2>
<div class="outline-text-2" id="text-4">
<ul class="org-ul">
<li>Official website: <a href="https://www.rust-lang.org">https://www.rust-lang.org</a></li>
<li>The Rust Programming Language (The book): <a href="https://doc.rust-lang.org/book/">https://doc.rust-lang.org/book/</a></li>
<li>Standard library reference: <a href="https://doc.rust-lang.org/std/">https://doc.rust-lang.org/std/</a></li>
</ul>
</div>
</div>

<div id="outline-container-org669fc50" class="outline-2">
<h2 id="org669fc50"><span class="section-number-2">5</span> Environment Setup</h2>
<div class="outline-text-2" id="text-5">
<p>
Install the <code>rust</code> package in arch linux.  The <code>cargo</code> package is the
package manager for rust. The official site for cargo:
<a href="https://crates.io/">https://crates.io/</a>, is also powered by Rust, so Rust is capable of
writing web applications.
</p>

<p>
There's another package called <code>rustup</code>. It is the official rust
installation method. It is a rust toolchain installer. It seems to be
able to manage the version of rust, and also support cross compile.
Rustup method will install both rustc and cargo.
</p>
</div>
</div>

<div id="outline-container-orgdcd5edc" class="outline-2">
<h2 id="orgdcd5edc"><span class="section-number-2">6</span> Compile</h2>
<div class="outline-text-2" id="text-6">
<p>
Directly use the compiler by <code>rustc main.rs</code>, will generate the executable.
</p>

<p>
Using cargo as build system:
</p>

<ul class="org-ul">
<li><code>cargo new hello_cargo --bin</code>: create a project. &#x2013;bin option
specify that we want a executable project instead library one.</li>
<li><code>cargo build</code>: run this inside the generated hello<sub>cargo</sub> folder,
build the project, into <code>target/debug</code> folder</li>
<li><code>cargo run</code>: to compile and run</li>
<li><code>cargo build --release</code> will enable optimization and output to
<code>target/release</code> folder.</li>
</ul>
</div>
</div>

<div id="outline-container-orgc070c6c" class="outline-2">
<h2 id="orgc070c6c"><span class="section-number-2">7</span> Misc</h2>
<div class="outline-text-2" id="text-7">
<p>
Comment is only <code>//</code>.
</p>
</div>
</div>

<div id="outline-container-org2e326f6" class="outline-2">
<h2 id="org2e326f6"><span class="section-number-2">8</span> Statement and expression</h2>
<div class="outline-text-2" id="text-8">
<p>
Statement does not have a value. So you cannot assign a let statement
to another let. However, experssion has a value. A block is also an
expression, and evaluates to the last expression it contains.
</p>

<div class="org-src-container">
<pre class="src src-rust"><span style="color: #a020f0;">let</span> <span style="color: #a0522d;">x</span> = 5;
<span style="color: #a020f0;">let</span> <span style="color: #a0522d;">y</span> = (<span style="color: #a020f0;">let</span> <span style="color: #a0522d;">x</span> = 5); <span style="color: #b22222;">// </span><span style="color: #b22222;">wrong</span>
<span style="color: #a020f0;">let</span> <span style="color: #a0522d;">y</span> = { <span style="color: #b22222;">// </span><span style="color: #b22222;">ok</span>
    <span style="color: #a020f0;">let</span> <span style="color: #a0522d;">x</span> = 3;
    x+1
};
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd0331c6" class="outline-2">
<h2 id="orgd0331c6"><span class="section-number-2">9</span> function</h2>
<div class="outline-text-2" id="text-9">
<div class="org-src-container">
<pre class="src src-rust"><span style="color: #a020f0;">fn</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #b22222;">// </span><span style="color: #b22222;">this is the main entry point of program</span>
}
<span style="color: #a020f0;">fn</span> <span style="color: #0000ff;">foo</span>() {}
<span style="color: #a020f0;">fn</span> <span style="color: #0000ff;">bar</span>(<span style="color: #a0522d;">x</span>: <span style="color: #228b22;">u32</span>, <span style="color: #a0522d;">y</span>: <span style="color: #228b22;">i32</span>) -&gt; <span style="color: #228b22;">i32</span> {5}
</pre>
</div>
<p>
The return value is the final expression in the block of the body of
the function. Note that the final expression should NOT have a
semicolon. The semicolon will make it a statement, thus not able to
have a value for return.
</p>

<p>
Of course, you can have a return statement <code>return 8;</code> to return
explicitly.
</p>
</div>
</div>

<div id="outline-container-org98b853c" class="outline-2">
<h2 id="org98b853c"><span class="section-number-2">10</span> import</h2>
<div class="outline-text-2" id="text-10">
<p>
use directive is only for shortcut. Without use, you can still use it, but need to full name.
</p>
<div class="org-src-container">
<pre class="src src-rust"><span style="color: #008b8b;">std</span>::<span style="color: #008b8b;">io</span>::stdin()
<span style="color: #b22222;">// </span><span style="color: #b22222;">using "use"</span>
<span style="color: #a020f0;">use</span> <span style="color: #008b8b;">std</span>::io;
<span style="color: #008b8b;">io</span>::stdin()
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfa324d1" class="outline-2">
<h2 id="orgfa324d1"><span class="section-number-2">11</span> variable</h2>
<div class="outline-text-2" id="text-11">
</div>
<div id="outline-container-org2ef7940" class="outline-3">
<h3 id="org2ef7940"><span class="section-number-3">11.1</span> Variable</h3>
<div class="outline-text-3" id="text-11-1">
<p>
All variables are immutable by default, but you can make it
mutable. The type can be omitted for rust to infer.
</p>

<div class="org-src-container">
<pre class="src src-rust"><span style="color: #a020f0;">let</span> <span style="color: #a0522d;">foo</span> = 5; <span style="color: #b22222;">// </span><span style="color: #b22222;">immutable</span>
<span style="color: #a020f0;">let</span> <span style="color: #a020f0;">mut</span> <span style="color: #a0522d;">bar</span> = 5; <span style="color: #b22222;">// </span><span style="color: #b22222;">mutable</span>
</pre>
</div>

<p>
Variable can be shadowed, of course, but in rust, you can shadow a
variable in sequencial block. The effect is creating a new variable
with the same name, and the type of variable can be changed:
</p>
<div class="org-src-container">
<pre class="src src-rust"><span style="color: #a020f0;">let</span> <span style="color: #a0522d;">spaces</span> = <span style="color: #8b2252;">"   "</span>;
<span style="color: #a020f0;">let</span> <span style="color: #a0522d;">spaces</span> = spaces.len();
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf7608e5" class="outline-3">
<h3 id="orgf7608e5"><span class="section-number-3">11.2</span> Constant</h3>
<div class="outline-text-3" id="text-11-2">
<p>
A constant must be declared with:
</p>
<ul class="org-ul">
<li>const keyword</li>
<li>explicit type</li>
<li>have value not computed at runtime</li>
</ul>
<div class="org-src-container">
<pre class="src src-rust"><span style="color: #a020f0;">const</span> <span style="color: #a0522d;">foo</span>: <span style="color: #228b22;">u32</span> = 8;
</pre>
</div>
</div>
</div>

<div id="outline-container-org7ac2be8" class="outline-3">
<h3 id="org7ac2be8"><span class="section-number-3">11.3</span> Reference</h3>
<div class="outline-text-3" id="text-11-3">
<p>
Reference is also immutable by default, so when passing a variable by
reference as a parameter to a function, use:
</p>
<div class="org-src-container">
<pre class="src src-rust">foo(&amp;<span style="color: #a020f0;">mut</span> bar)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org2888ffd" class="outline-2">
<h2 id="org2888ffd"><span class="section-number-2">12</span> Type</h2>
<div class="outline-text-2" id="text-12">
</div>
<div id="outline-container-org3734553" class="outline-3">
<h3 id="org3734553"><span class="section-number-3">12.1</span> Scalar type</h3>
<div class="outline-text-3" id="text-12-1">
</div>
<div id="outline-container-org410c203" class="outline-4">
<h4 id="org410c203"><span class="section-number-4">12.1.1</span> Integer</h4>
<div class="outline-text-4" id="text-12-1-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">length</th>
<th scope="col" class="org-left">signed</th>
<th scope="col" class="org-left">unsigned</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">8</td>
<td class="org-left">i8</td>
<td class="org-left">u8</td>
</tr>

<tr>
<td class="org-right">16</td>
<td class="org-left">i16</td>
<td class="org-left">u16</td>
</tr>

<tr>
<td class="org-right">32</td>
<td class="org-left">i32</td>
<td class="org-left">u32</td>
</tr>

<tr>
<td class="org-right">64</td>
<td class="org-left">i64</td>
<td class="org-left">u64</td>
</tr>

<tr>
<td class="org-right">arch</td>
<td class="org-left">isize</td>
<td class="org-left">usize</td>
</tr>
</tbody>
</table>

<p>
isize and usize will be 64-bit on a 64 machine, and 32-bit on a 32
one.
</p>
</div>
</div>

<div id="outline-container-org8f0c361" class="outline-4">
<h4 id="org8f0c361"><span class="section-number-4">12.1.2</span> float</h4>
<div class="outline-text-4" id="text-12-1-2">
<ul class="org-ul">
<li>f32</li>
<li>f64</li>
</ul>
</div>
</div>

<div id="outline-container-org586fd5c" class="outline-4">
<h4 id="org586fd5c"><span class="section-number-4">12.1.3</span> boolean</h4>
<div class="outline-text-4" id="text-12-1-3">
<ul class="org-ul">
<li>bool: have value true and false</li>
</ul>
</div>
</div>

<div id="outline-container-orga86e1c8" class="outline-4">
<h4 id="orga86e1c8"><span class="section-number-4">12.1.4</span> character</h4>
<div class="outline-text-4" id="text-12-1-4">
<ul class="org-ul">
<li>char</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org122446f" class="outline-3">
<h3 id="org122446f"><span class="section-number-3">12.2</span> Compound type</h3>
<div class="outline-text-3" id="text-12-2">
</div>
<div id="outline-container-org3363d79" class="outline-4">
<h4 id="org3363d79"><span class="section-number-4">12.2.1</span> tuple</h4>
<div class="outline-text-4" id="text-12-2-1">
<div class="org-src-container">
<pre class="src src-rust"><span style="color: #a020f0;">let</span> <span style="color: #a0522d;">tup</span>: (<span style="color: #228b22;">i32</span>, <span style="color: #228b22;">f64</span>, <span style="color: #228b22;">u8</span>) = (500, 6.4, 1);
<span style="color: #a020f0;">let</span> (x,y,z) = tup;
</pre>
</div>
</div>
</div>

<div id="outline-container-org55fa0d5" class="outline-4">
<h4 id="org55fa0d5"><span class="section-number-4">12.2.2</span> array</h4>
<div class="outline-text-4" id="text-12-2-2">
<div class="org-src-container">
<pre class="src src-rust"><span style="color: #a020f0;">let</span> <span style="color: #a0522d;">arr</span> = [1,2,3,4,5];
<span style="color: #a020f0;">let</span> <span style="color: #a0522d;">first</span> = a[0];
<span style="color: #a020f0;">let</span> <span style="color: #a0522d;">second</span> = a[1];
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgabff320" class="outline-3">
<h3 id="orgabff320"><span class="section-number-3">12.3</span> String</h3>
<div class="outline-text-3" id="text-12-3">
<p>
The String::new is a static method of the type String.
</p>
<div class="org-src-container">
<pre class="src src-rust"><span style="color: #a020f0;">let</span> <span style="color: #a020f0;">mut</span> <span style="color: #228b22;">str</span> = <span style="color: #228b22;">String</span>::new();
<span style="color: #b22222;">// </span><span style="color: #b22222;">the expect is a method of Result object</span>
<span style="color: #008b8b;">io</span>::stdin().read_line(&amp;<span style="color: #a020f0;">mut</span> <span style="color: #228b22;">str</span>).expect(<span style="color: #8b2252;">"Failed to read line"</span>);
<span style="color: #b22222;">// </span><span style="color: #b22222;">convert string to num</span>
<span style="color: #a020f0;">let</span> <span style="color: #a0522d;">num</span>: <span style="color: #228b22;">u32</span> = <span style="color: #228b22;">str</span>.trim().parse().expect(<span style="color: #8b2252;">"Failed to convert to number"</span>);
<span style="color: #b22222;">// </span><span style="color: #b22222;">convert string to num without crash on exception</span>
<span style="color: #a020f0;">let</span> <span style="color: #a0522d;">num</span>: <span style="color: #228b22;">u32</span> = <span style="color: #a020f0;">match</span> <span style="color: #228b22;">str</span>.trim().parse() {
    <span style="color: #228b22;">Ok</span>(num) =&gt; num,
    <span style="color: #228b22;">Err</span>(_) =&gt; <span style="color: #483d8b;">println!</span>(<span style="color: #8b2252;">"Error but not going to crash"</span>),
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf827bf3" class="outline-3">
<h3 id="orgf827bf3"><span class="section-number-3">12.4</span> Result</h3>
<div class="outline-text-3" id="text-12-4">
<p>
Result is a type. It can be either Ok or Err. It has expect method,
which consume the result, and crash the program if the result is
Err. If not want to crash, use match and catch both Ok and Err.
</p>
</div>
</div>
</div>


<div id="outline-container-org2b34a0a" class="outline-2">
<h2 id="org2b34a0a"><span class="section-number-2">13</span> Ownership</h2>
<div class="outline-text-2" id="text-13">
<ul class="org-ul">
<li>each value in Rust has a variable as its owner</li>
<li>There can only be one owner at a time</li>
<li>When the owner goes out of scope, the value will be dropped</li>
</ul>

<p>
The ownership changes at assignment. A variable is allocated on stack
if the size of it is known, such as the primitive types and tuples
containing only primitive types. More compliacated types such as
string are allocated on heap.
</p>

<p>
When doing assignment, the stack variable will do copy, but heap ones
will do move. After move, it is not valid to use the previous
variable, thus prevent double free. E.g.
</p>

<div class="org-src-container">
<pre class="src src-rust"><span style="color: #a020f0;">let</span> <span style="color: #a0522d;">x</span> = 5;
<span style="color: #a020f0;">let</span> <span style="color: #a0522d;">y</span> = x;
<span style="color: #b22222;">// </span><span style="color: #b22222;">now x and y will both be valid, holding a seperate copy of value 5</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">on stack</span>
<span style="color: #a020f0;">let</span> <span style="color: #a0522d;">s1</span> = <span style="color: #228b22;">String</span>::from(<span style="color: #8b2252;">"hello"</span>);
<span style="color: #a020f0;">let</span> <span style="color: #a0522d;">s2</span> = s1;
<span style="color: #b22222;">// </span><span style="color: #b22222;">now s1 is invalid to use because it is moved</span>
<span style="color: #a020f0;">let</span> <span style="color: #a0522d;">s3</span> = <span style="color: #228b22;">String</span>::from(<span style="color: #8b2252;">"hello"</span>);
<span style="color: #a020f0;">let</span> <span style="color: #a0522d;">s4</span> = s3.clone();
<span style="color: #b22222;">// </span><span style="color: #b22222;">now s3 is still valid</span>
</pre>
</div>

<p>
The function parameter passing and return value follow the same rule.
</p>
</div>

<div id="outline-container-orgb2d4397" class="outline-3">
<h3 id="orgb2d4397"><span class="section-number-3">13.1</span> Reference</h3>
<div class="outline-text-3" id="text-13-1">
<p>
To use reference in function passing, you have to use reference sign at both end:
</p>
<div class="org-src-container">
<pre class="src src-rust"><span style="color: #a020f0;">fn</span> <span style="color: #0000ff;">foo</span>(<span style="color: #a0522d;">x</span>: &amp;<span style="color: #228b22;">String</span>) {}
<span style="color: #a020f0;">fn</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #a020f0;">let</span> <span style="color: #a0522d;">x</span> = 8;
    foo(&amp;x);
}
</pre>
</div>

<p>
The reference is immutable by default, so to create mutable one:
</p>
<div class="org-src-container">
<pre class="src src-rust"><span style="color: #a020f0;">fn</span> <span style="color: #0000ff;">foo</span>(<span style="color: #a0522d;">x</span>: &amp;<span style="color: #a020f0;">mut</span> <span style="color: #228b22;">String</span>) {}
<span style="color: #a020f0;">fn</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #a020f0;">let</span> <span style="color: #a020f0;">mut</span> <span style="color: #a0522d;">x</span> = 8;
    foo(&amp;<span style="color: #a020f0;">mut</span> x);
}
</pre>
</div>

<p>
Reference can also be used without function
</p>
<div class="org-src-container">
<pre class="src src-rust"><span style="color: #a020f0;">let</span> <span style="color: #a020f0;">mut</span> <span style="color: #a0522d;">s</span> = <span style="color: #228b22;">String</span>::from(<span style="color: #8b2252;">"hello"</span>);
<span style="color: #a020f0;">let</span> <span style="color: #a0522d;">r1</span> = &amp;s;
<span style="color: #a020f0;">let</span> <span style="color: #a0522d;">r2</span> = &amp;s;
</pre>
</div>

<p>
You cannot have multiple mutable reference, or one mutable reference
and one or more immutable one.
</p>

<div class="org-src-container">
<pre class="src src-rust"><span style="color: #a020f0;">let</span> <span style="color: #a020f0;">mut</span> <span style="color: #a0522d;">s</span> = <span style="color: #228b22;">String</span>::from(<span style="color: #8b2252;">"hello"</span>);
<span style="color: #a020f0;">let</span> <span style="color: #a0522d;">r1</span> = &amp;<span style="color: #a020f0;">mut</span> s;
<span style="color: #a020f0;">let</span> <span style="color: #a0522d;">r2</span> = &amp;<span style="color: #a020f0;">mut</span> s; <span style="color: #b22222;">// </span><span style="color: #b22222;">error</span>

<span style="color: #a020f0;">let</span> <span style="color: #a020f0;">mut</span> <span style="color: #a0522d;">s</span> = <span style="color: #228b22;">String</span>::from(<span style="color: #8b2252;">"hello"</span>);
<span style="color: #a020f0;">let</span> <span style="color: #a0522d;">r1</span> = &amp;s;
<span style="color: #a020f0;">let</span> <span style="color: #a0522d;">r2</span> = &amp;<span style="color: #a020f0;">mut</span> s; <span style="color: #b22222;">// </span><span style="color: #b22222;">error</span>
</pre>
</div>

<p>
This prevent dangling reference, and data race. The compiler will ensure the data will not be dropped before the reference goes out of scope.
</p>
</div>
</div>

<div id="outline-container-org38f72e4" class="outline-3">
<h3 id="org38f72e4"><span class="section-number-3">13.2</span> Slice</h3>
<div class="outline-text-3" id="text-13-2">
<p>
Slice is a reference of part of a collection. It can be a string, or an array, etc.
</p>

<p>
The string slice type is <code>&amp;str</code>, it is always immutable.
String literal is actually string slice, thus it is immutable.
</p>

<div class="org-src-container">
<pre class="src src-rust"><span style="color: #a020f0;">let</span> <span style="color: #a0522d;">s</span> = <span style="color: #228b22;">String</span>::from(<span style="color: #8b2252;">"hello world"</span>);
<span style="color: #a020f0;">let</span> <span style="color: #a0522d;">hello</span> = &amp;s[0..5];
<span style="color: #b22222;">// </span><span style="color: #b22222;">same as</span>
<span style="color: #a020f0;">let</span> <span style="color: #a0522d;">hello</span> = &amp;s[..5];
<span style="color: #a020f0;">let</span> <span style="color: #a0522d;">world</span> = &amp;s[6..11];
<span style="color: #b22222;">// </span><span style="color: #b22222;">same as</span>
<span style="color: #a020f0;">let</span> <span style="color: #a0522d;">world</span> = &amp;s[6..s.len()]
<span style="color: #b22222;">// </span><span style="color: #b22222;">same as</span>
<span style="color: #a020f0;">let</span> <span style="color: #a0522d;">world</span> = &amp;s[6..];
<span style="color: #b22222;">// </span><span style="color: #b22222;">whole</span>
<span style="color: #a020f0;">let</span> <span style="color: #a0522d;">whole</span> = &amp;s[..];
</pre>
</div>

<p>
It is similar for an array, the slice has type <code>&amp;[i32]</code>:
</p>
<div class="org-src-container">
<pre class="src src-rust"><span style="color: #a020f0;">let</span> <span style="color: #a0522d;">a</span> = [1,2,3,4,5]
<span style="color: #a020f0;">let</span> <span style="color: #a0522d;">slice</span> = &amp;a[1..3]
</pre>
</div>

<p>
Use slice reference to get the first word of a string:
</p>
<div class="org-src-container">
<pre class="src src-rust"><span style="color: #a020f0;">fn</span> <span style="color: #0000ff;">first_world</span>(<span style="color: #a0522d;">s</span>: &amp;<span style="color: #228b22;">String</span>) -&gt; &amp;<span style="color: #228b22;">str</span> {
    <span style="color: #a020f0;">let</span> <span style="color: #a0522d;">bytes</span> = s.as_bytes();
    <span style="color: #a020f0;">for</span> (i, &amp;item) <span style="color: #a020f0;">in</span> bytes.iter().enumerate() {
        <span style="color: #a020f0;">if</span> item == b<span style="color: #8b2252;">' '</span> {
            <span style="color: #a020f0;">return</span> &amp;s[..i];
        }
    }
    &amp;s[..]
}
</pre>
</div>

<p>
The compiler will make sure the reference will be valid all the time.
</p>
</div>
</div>
</div>


<div id="outline-container-orgd3714dc" class="outline-2">
<h2 id="orgd3714dc"><span class="section-number-2">14</span> control flow</h2>
<div class="outline-text-2" id="text-14">
</div>
<div id="outline-container-orga4cde2e" class="outline-3">
<h3 id="orga4cde2e"><span class="section-number-3">14.1</span> match</h3>
<div class="outline-text-3" id="text-14-1">
<div class="org-src-container">
<pre class="src src-rust"><span style="color: #a020f0;">use</span> <span style="color: #008b8b;">std</span>::<span style="color: #008b8b;">cmp</span>::<span style="color: #228b22;">Ordering</span>;
<span style="color: #a020f0;">fn</span> <span style="color: #0000ff;">main</span>() {
  <span style="color: #a020f0;">let</span> <span style="color: #a0522d;">num1</span> = 1;
  <span style="color: #a020f0;">let</span> <span style="color: #a0522d;">num2</span> = 2;
  <span style="color: #a020f0;">match</span> num1.cmp(&amp;num2) {
      <span style="color: #228b22;">Ordering</span>::<span style="color: #228b22;">Less</span> =&gt; <span style="color: #483d8b;">println!</span>(<span style="color: #8b2252;">"Too small"</span>);
      <span style="color: #228b22;">Ordering</span>::<span style="color: #228b22;">Greater</span> =&gt; <span style="color: #483d8b;">println!</span>(<span style="color: #8b2252;">"Too Big"</span>);
      <span style="color: #228b22;">Ordering</span>::<span style="color: #228b22;">Equal</span> =&gt; {
          <span style="color: #483d8b;">println!</span>(<span style="color: #8b2252;">"Correct"</span>);
          <span style="color: #483d8b;">println!</span>(<span style="color: #8b2252;">"Exiting"</span>);
      }
  }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org42e2f48" class="outline-3">
<h3 id="org42e2f48"><span class="section-number-3">14.2</span> loop</h3>
<div class="outline-text-3" id="text-14-2">
<ul class="org-ul">
<li>loop {}: infinite loop</li>
<li>can use break and continue</li>
</ul>
</div>
</div>
<div id="outline-container-org0c5c044" class="outline-3">
<h3 id="org0c5c044"><span class="section-number-3">14.3</span> while</h3>
<div class="outline-text-3" id="text-14-3">
<pre class="example">
while expr {}
</pre>
</div>
</div>

<div id="outline-container-org0b9e54f" class="outline-3">
<h3 id="org0b9e54f"><span class="section-number-3">14.4</span> for</h3>
<div class="outline-text-3" id="text-14-4">
<p>
It is used to loop all items in a collection.
</p>
<div class="org-src-container">
<pre class="src src-rust"><span style="color: #a020f0;">let</span> <span style="color: #a0522d;">a</span> = [1,2,3,4,5];
<span style="color: #a020f0;">for</span> elem <span style="color: #a020f0;">in</span> a.iter() {}
<span style="color: #b22222;">// </span><span style="color: #b22222;">reverse</span>
<span style="color: #a020f0;">for</span> number <span style="color: #a020f0;">in</span> (1..4).rev() {}
</pre>
</div>
</div>
</div>

<div id="outline-container-org9ad9cef" class="outline-3">
<h3 id="org9ad9cef"><span class="section-number-3">14.5</span> if</h3>
<div class="outline-text-3" id="text-14-5">
<pre class="example">
if expr {} else if expr {} else {}
</pre>

<p>
expr does not need <code>()</code>
</p>
</div>
</div>
</div>


<div id="outline-container-orgdf5b73d" class="outline-2">
<h2 id="orgdf5b73d"><span class="section-number-2">15</span> Standard Library</h2>
<div class="outline-text-2" id="text-15">
<ul class="org-ul">
<li>println!</li>
</ul>
<div class="org-src-container">
<pre class="src src-rust"><span style="color: #483d8b;">println!</span>(<span style="color: #8b2252;">"This is x: </span><span style="color: #8b2252; font-style: italic;">{}</span><span style="color: #8b2252;"> and y: </span><span style="color: #8b2252; font-style: italic;">{}</span><span style="color: #8b2252;">"</span>, x, y);
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Hebi Li</p>
<p class="date">Created: 2017-12-07 Thu 15:13</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
