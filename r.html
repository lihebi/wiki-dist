<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2016-03-10 Thu 14:31 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="viewport" content="width=device-width, initial-scale=1" />
<title>R</title>
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Hebi Li" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<style>
a:visited {color: red;}
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">R</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline2">1. Install package</a>
<ul>
<li><a href="#orgheadline1">1.1. Trouble shooting</a></li>
</ul>
</li>
<li><a href="#orgheadline3">2. Vectors</a></li>
<li><a href="#orgheadline4">3. Numbers</a></li>
<li><a href="#orgheadline5">4. Logical</a></li>
<li><a href="#orgheadline6">5. String</a></li>
<li><a href="#orgheadline7">6. Objects</a></li>
<li><a href="#orgheadline15">7. array</a>
<ul>
<li><a href="#orgheadline8">7.1. Sequences</a></li>
<li><a href="#orgheadline9">7.2. Vector Indexing/Subseting/Slicing</a></li>
<li><a href="#orgheadline10">7.3. Array</a></li>
<li><a href="#orgheadline11">7.4. indexing matrix</a></li>
<li><a href="#orgheadline12">7.5. outer product</a></li>
<li><a href="#orgheadline13">7.6. matrix multiplication</a></li>
<li><a href="#orgheadline14">7.7. solve linear equation</a></li>
</ul>
</li>
<li><a href="#orgheadline16">8. functions</a></li>
<li><a href="#orgheadline17">9. Interactive</a></li>
</ul>
</div>
</div>
<div class="org-src-container">

<pre class="src src-R">library(class)
setwd("/absolute/path")
# the following can be the relative path to the above path
source("./xxx.R") # load a script
</pre>
</div>

<div id="outline-container-orgheadline2" class="outline-2">
<h2 id="orgheadline2"><span class="section-number-2">1</span> Install package</h2>
<div class="outline-text-2" id="text-1">
<p>
Use Rstudio, install, select from local archive.
Download from CRAN website(binary), locate to that package in Rstudio to install.
</p>
</div>

<div id="outline-container-orgheadline1" class="outline-3">
<h3 id="orgheadline1"><span class="section-number-3">1.1</span> Trouble shooting</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Error message on mac os x:
</p>

<div class="org-src-container">

<pre class="src src-text">package 'multicore' is not installed for 'arch=x86_64'
</pre>
</div>

<p>
Now you need to install from source.
Download source code, then use
</p>

<div class="org-src-container">

<pre class="src src-text">R --arch x86_64 CMD INSTALL multicore_0.1-3.tar.gz
R --arch=i386 CMD INSTALL --libs-only multicore_0.1-3.tgz
</pre>
</div>

<p>
As Matthew said at <a href="http://www.matthewckeller.com/html/64_bit_r_on_mac.html">http://www.matthewckeller.com/html/64_bit_r_on_mac.html</a>
</p>

<blockquote>
<p>
The first command installs the package multicore for 64-bit architecture.
It will erase any existing ‘multicore’ library that exists at the default location where libraries are installed
(Library/Frameworks/R.framework/Resources/library).
The second command installs the package for 32-bit use in case you want that.
Make sure on the second command to include the &#x2013;libs-only option or else you’ll erase your 64-bit package
and replace it with a 32-bit one.
</p>
</blockquote>
</div>
</div>
</div>








<div id="outline-container-orgheadline3" class="outline-2">
<h2 id="orgheadline3"><span class="section-number-2">2</span> Vectors</h2>
<div class="outline-text-2" id="text-2">
<p>
all these assignments are equivalent
</p>

<div class="org-src-container">

<pre class="src src-R"># c() can take an arbitrary number of vector arguments.
# return a vector got by concatenating its arguments end to end
&gt; x &lt;- c(10.4, 5.6, 3.1, 6.4, 21.7)
&gt; x = c(10.4, 5.6, 3.1, 6.4, 21.7)
&gt; x
# display x
&gt; assign("x", c(10.4, 5.6, 3.1, 6.4, 21.7))
&gt; c(10.4, 5.6, 3.1, 6.4, 21.7) -&gt; x
</pre>
</div>

<p>
operation on vector
</p>

<div class="org-src-container">

<pre class="src src-R">&gt; 1/x # will use 1 divides all 5 values of x, just like matrix in matlab
&gt; y &lt;- c(x, 0, x)
# the oprand does not need to be the same length
# The result is the longest, small ones repeat.
&gt; v &lt;- 2*x + y + 1
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline4" class="outline-2">
<h2 id="orgheadline4"><span class="section-number-2">3</span> Numbers</h2>
<div class="outline-text-2" id="text-3">
<p>
R will use double precision real numbers, or double precision complex numbers.
</p>

<p>
Always supply complex numbers explicitly:
`sqrt(-17)` will give NaN and a warning,
but `sqrt(-17+0i)` will do it.
</p>
</div>
</div>



<div id="outline-container-orgheadline5" class="outline-2">
<h2 id="orgheadline5"><span class="section-number-2">4</span> Logical</h2>
<div class="outline-text-2" id="text-4">
<p>
`TRUE`, `FALSE`, `NA`
</p>

<ul class="org-ul">
<li>`!a`</li>
<li>`a &amp; b`</li>
<li>`a | b`</li>

<li>`is.na(x)`. never use x==NA, that will output a vector of lengh(x) with all NA</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline6" class="outline-2">
<h2 id="orgheadline6"><span class="section-number-2">5</span> String</h2>
<div class="outline-text-2" id="text-5">
<p>
`paste()` function takes an arbitrary number of arguments
and concatenates them one by one into character strings.
Any numbers given among the arguments are coerced
into character strings in the evident way,
that is, in the same way they would be if they were printed.
</p>

<p>
The recycling rule also takes place here.
</p>

<div class="org-src-container">

<pre class="src src-R">&gt; labs &lt;- paste(c("X","Y"), 1:10, sep="")
# c("X1", "Y2", "X3", "Y4", "X5", "Y6", "X7", "Y8", "X9", "Y10")
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline7" class="outline-2">
<h2 id="orgheadline7"><span class="section-number-2">6</span> Objects</h2>
<div class="outline-text-2" id="text-6">
<p>
Two intrinsic attributes: mode and length.
Have two system functions:
`mode(object)` and `length(object)`.
</p>

<ul class="org-ul">
<li>mode: the basic type of its fundamental constituents</li>
</ul>
</div>
</div>



<div id="outline-container-orgheadline15" class="outline-2">
<h2 id="orgheadline15"><span class="section-number-2">7</span> array</h2>
<div class="outline-text-2" id="text-7">
</div><div id="outline-container-orgheadline8" class="outline-3">
<h3 id="orgheadline8"><span class="section-number-3">7.1</span> Sequences</h3>
<div class="outline-text-3" id="text-7-1">
<ul class="org-ul">
<li>`1:30`: c(1, 2, …, 29, 30)</li>
<li>and the colon operater has higher priority: `2*1:15` =&gt; c(2, 4, …, 28, 30)</li>
<li>`30:1`: backward</li>
<li>`seq(2,10)` =&gt; `2:10`</li>
<li>`seq(from=1, to=30)` == `seq(to=30, from=1)`</li>
</ul>

<div class="org-src-container">

<pre class="src src-R">&gt; seq(-5, 5, by=.2) -&gt; s3
&gt; s4 &lt;- seq(length=51, from=-5, by=.2)
# x = [1,2,3]
&gt; s5 &lt;- rep(x, times=5) # put five copies of x end-to-end in s5
# [1,2,3,1,2,3,...]
&gt; s6 &lt;- rep(x, each=5) # repeats each element of x five times before moving on to the next.
# [1,1,1,1,1,2,2,2,2,2,...]
</pre>
</div>
</div>
</div>


<div id="outline-container-orgheadline9" class="outline-3">
<h3 id="orgheadline9"><span class="section-number-3">7.2</span> Vector Indexing/Subseting/Slicing</h3>
<div class="outline-text-3" id="text-7-2">
<div class="org-src-container">

<pre class="src src-R">&gt; y &lt;- x[!is.na(x)]
# x's none-NA elements.
&gt; (x+1)[(!is.na(x)) &amp; x&gt;0] -&gt; z
&gt; x[6] # 6th element
&gt; x[1:10] # first 10 elements
&gt; c("x","y")[rep(c(1,2,2,1), times=4)]
# a character vector of length 16 consisting of "x", "y", "y", "x" repeated four times.
&gt; y &lt;- x[-(1:5)]
# all but the first five elements of x.
</pre>
</div>

<p>
naming
</p>

<div class="org-src-container">

<pre class="src src-R">&gt; fruit &lt;- c(5, 10, 1, 20)
&gt; names(fruit) &lt;- c("orange", "banana", "apple", "peach")
&gt; lunch &lt;- fruit[c("apple","orange")]
</pre>
</div>

<p>
change the subset:
</p>

<div class="org-src-container">

<pre class="src src-R">&gt; x[is.na(x)] &lt;- 0
# replaces any missing values in x by zeros
&gt; y[y &lt; 0] &lt;- -y[y &lt; 0]
# is same as:
&gt; y &lt;- abs(y)
</pre>
</div>
</div>
</div>


<div id="outline-container-orgheadline10" class="outline-3">
<h3 id="orgheadline10"><span class="section-number-3">7.3</span> Array</h3>
<div class="outline-text-3" id="text-7-3">
<div class="org-src-container">

<pre class="src src-R">&gt; dim(z) &lt;- c(3,5,100)
# 3 by 5 by 100 array
&gt; z[2,,] # is 5,100 array
&gt; z[,,] # is the entire array
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline11" class="outline-3">
<h3 id="orgheadline11"><span class="section-number-3">7.4</span> indexing matrix</h3>
<div class="outline-text-3" id="text-7-4">
<div class="org-src-container">

<pre class="src src-R">&gt; x &lt;- array(1:20, dim=c(4,5))   # Generate a 4 by 5 array.
&gt; x
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    5    9   13   17
[2,]    2    6   10   14   18
[3,]    3    7   11   15   19
[4,]    4    8   12   16   20
&gt; i &lt;- array(c(1:3,3:1), dim=c(3,2))
&gt; i                             # i is a 3 by 2 index array.
     [,1] [,2]
[1,]    1    3
[2,]    2    2
[3,]    3    1
&gt; x[i]                          # Extract those elements
[1] 9 6 3
&gt; x[i] &lt;- 0                     # Replace those elements by zeros.
&gt; x
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    5    0   13   17
[2,]    2    0   10   14   18
[3,]    0    7   11   15   19
[4,]    4    8   12   16   20
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline12" class="outline-3">
<h3 id="orgheadline12"><span class="section-number-3">7.5</span> outer product</h3>
<div class="outline-text-3" id="text-7-5">
<div class="org-src-container">

<pre class="src src-R">&gt; ab &lt;- a %o% b
# the same as
&gt; ab &lt;- outer(a, b, "*")
</pre>
</div>

<p>
we can change the function used in `outer`
</p>

<div class="org-src-container">

<pre class="src src-R">&gt; f &lt;- function(x, y) cos(y)/(1 + x^2)
&gt; z &lt;- outer(x, y, f)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline13" class="outline-3">
<h3 id="orgheadline13"><span class="section-number-3">7.6</span> matrix multiplication</h3>
<div class="outline-text-3" id="text-7-6">
<div class="org-src-container">

<pre class="src src-R">&gt; A * B # matrix of element by element products
&gt; A %*% B # matrix product
&gt; x %*% A %*% x # quadratic form ... 二次多项式 ax^2 + bxy + cy^2
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline14" class="outline-3">
<h3 id="orgheadline14"><span class="section-number-3">7.7</span> solve linear equation</h3>
<div class="outline-text-3" id="text-7-7">
<div class="org-src-container">

<pre class="src src-R">&gt; b &lt;- A %*% x
# if b and A are given, but not x, x will contain the result
&gt; solve(A,b) # will also solve the system.
# I'm not sure this should be execute after the previous statement.
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline16" class="outline-2">
<h2 id="orgheadline16"><span class="section-number-2">8</span> functions</h2>
<div class="outline-text-2" id="text-8">
<ul class="org-ul">
<li>+,-,`*`,/,<sup>(power)</sup>,</li>
<li>`log`, `exp`, `sin`, `cos`, `tan`, `sqrt`</li>
<li>`min`, `max`</li>
<li>`pmax` and `pmin`: parallel maximum and minimum functions
a vector (of length equal to their longest argument) that contains in each element the largest (smallest) element in that position in any of the input vectors</li>
<li>`range` = c(min(x),max(x))</li>
<li>length(x), sum(x), prod(x) (product)</li>
<li>mean(x): sum(x)/length(x)</li>
<li>var(x): sum((x-mean(x))<sup>2</sup>)/(length(x)-1)</li>
<li>sort(x): increasing order</li>
<li>order() or sort.list()</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline17" class="outline-2">
<h2 id="orgheadline17"><span class="section-number-2">9</span> Interactive</h2>
<div class="outline-text-2" id="text-9">
<p>
Be sure to enter a new work directory because `R` may store something in current directory.
</p>

<p>
Basic help:
</p>

<div class="org-src-container">

<pre class="src src-R">R
&gt; q()
&gt; help(lm)
&gt; help("if")
&gt; ?lm
&gt; example(topic)
&gt; ??solve
</pre>
</div>

<p>
Function command:
</p>

<div class="org-src-container">

<pre class="src src-R">&gt; source("a.R") # load another file
&gt; sink("a.lis") # redirect output to a.lis
&gt; sink() # retore output to stdio
&gt; ls() # list the objects currently stored
&gt; objects() # create and store current objects
&gt; rm(x, y, z, ink, junk, temp, foo, bar) # remove objects
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Hebi Li</p>
<p class="date">Created: 2016-03-10 Thu 14:31</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
