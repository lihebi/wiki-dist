<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2018-01-04 Thu 21:28 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Clang</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Hebi Li" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="assets/hebi.css" /><link rel="stylesheet" type="text/css" href="assets/test.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2017 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Clang</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org90426bd">1. Use As Command</a></li>
<li><a href="#orgc12ea34">2. Project Setup</a>
<ul>
<li><a href="#orge0a26a0">2.1. Compilation Database</a></li>
</ul>
</li>
<li><a href="#org39282d8">3. libclang</a>
<ul>
<li><a href="#org8ca982f">3.1. Source Location</a></li>
<li><a href="#org35c1ee2">3.2. Translation unit manipulation</a></li>
<li><a href="#org22978f2">3.3. Token manipulation</a></li>
<li><a href="#org17b68fd">3.4. Cursors</a>
<ul>
<li><a href="#orgbd68d63">3.4.1. Traversing</a></li>
<li><a href="#org1b069f4">3.4.2. type information</a></li>
<li><a href="#orgd0805e7">3.4.3. manipulation</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org5fa16ea">4. LibTooling</a>
<ul>
<li><a href="#org878c314">4.1. In-memory code parsing</a></li>
<li><a href="#org9d6d8a5">4.2. On-disk code parsing</a></li>
<li><a href="#org23b44c8">4.3. Command Line</a></li>
<li><a href="#org16f676f">4.4. FrontendAction</a></li>
<li><a href="#org7b51575">4.5. Type</a>
<ul>
<li><a href="#orgf2299ce">4.5.1. canonical type</a></li>
<li><a href="#org8d9a079">4.5.2. QualType</a></li>
</ul>
</li>
<li><a href="#org9c488f4">4.6. Clang AST</a></li>
</ul>
</li>
<li><a href="#orgf83aa6e">5. Lexer</a></li>
<li><a href="#orgc56f65c">6. Reference</a></li>
</ul>
</div>
</div>

<div id="outline-container-org90426bd" class="outline-2">
<h2 id="org90426bd"><span class="section-number-2">1</span> Use As Command</h2>
<div class="outline-text-2" id="text-1">
<dl class="org-dl">
<dt><code>-ast-dump</code></dt><dd>dump ast</dd>
<dt><code>-ast-dump-filter</code></dt><dd>filter to only dump part of the AST</dd>
<dt><code>-ast-list</code></dt><dd>list ast nodes</dd>
</dl>

<pre class="example">
clang -Xclang -ast-dump -fsyntax-only a.c
clang -emit-ast a.c
clang-check -ast-list lib/parser.cpp | grep AddValue
clang-check a.cc -ast-dump -ast-dump-filter=StdStringA --
</pre>
</div>
</div>

<div id="outline-container-orgc12ea34" class="outline-2">
<h2 id="orgc12ea34"><span class="section-number-2">2</span> Project Setup</h2>
<div class="outline-text-2" id="text-2">
<p>
This mainly talks about CMake configuration.
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span style="color: #b22222;"># llvm</span>
<span style="color: #0000ff;">find_package</span>(LLVM REQUIRED CONFIG)
<span style="color: #0000ff;">message</span>(STATUS <span style="color: #8b2252;">"Found LLVM ${</span><span style="color: #a0522d;">LLVM_PACKAGE_VERSION</span><span style="color: #8b2252;">}"</span>)
<span style="color: #0000ff;">message</span>(STATUS <span style="color: #8b2252;">"Using LLVMCOnfig.cmake in: ${</span><span style="color: #a0522d;">LLVM_DIR</span><span style="color: #8b2252;">}"</span>)
<span style="color: #0000ff;">add_definitions</span>(${<span style="color: #a0522d;">LLVM_DEFINITIONS</span>})
<span style="color: #0000ff;">include_directories</span>(${<span style="color: #a0522d;">LLVM_INCLUDE_DIRS</span>})
<span style="color: #0000ff;">set</span>(LLVM_LINK_COMPONENTS support)
<span style="color: #b22222;"># clang</span>
<span style="color: #0000ff;">find_package</span>(Clang REQUIRED CONFIG)
<span style="color: #b22222;"># linking</span>
<span style="color: #0000ff;">link_libraries</span>(clang clangTooling clangFrontend clangFrontendTool)
<span style="color: #0000ff;">link_libraries</span>(libclang gtest)
</pre>
</div>
</div>


<div id="outline-container-orge0a26a0" class="outline-3">
<h3 id="orge0a26a0"><span class="section-number-3">2.1</span> Compilation Database</h3>
<div class="outline-text-3" id="text-2-1">
<p>
To create a <code>compilation_commands.json</code> from a Makefile, use
</p>

<pre class="example">
bear make
</pre>


<p>
To create from a cmake project, use
</p>
<pre class="example">
cmake -DCMAKE_EXPORT_COMPILE_COMMANDS=ON
</pre>

<p>
The command line option <code>--</code> at the end to invoke the tool will not
trying to find compilation database. Use <code>-p BuildDir</code> to read
database from the folder.
</p>
</div>
</div>
</div>


<div id="outline-container-org39282d8" class="outline-2">
<h2 id="org39282d8"><span class="section-number-2">3</span> libclang</h2>
<div class="outline-text-2" id="text-3">
<p>
The document is simply the doxygen page:
<a href="http://clang.llvm.org/doxygen/group__CINDEX.html">http://clang.llvm.org/doxygen/group__CINDEX.html</a>
</p>

<p>
This library is nice to parse the file (given the command line
arguments), get the AST, and traverse it. During the traversal, you
can get the kind of the AST node, the underline tokens, and raw
text. However, you cannot get the AST class, i.e. you cannot get a
IfStmt, and call its <code>then</code> method. But this is enough for dumping the
AST into a plain text file, right?
</p>
</div>


<div id="outline-container-org8ca982f" class="outline-3">
<h3 id="org8ca982f"><span class="section-number-3">3.1</span> Source Location</h3>
<div class="outline-text-3" id="text-3-1">
<p>
In this stage, there are three important classes: the cursor and the
token, and location.
</p>

<p>
A source location can be generated from line and column number pair.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #b22222;">-- </span><span style="color: #b22222;">line,columne -&gt; location</span>
<span style="color: #0000ff;">clang_getLocation</span> <span style="color: #a0522d;">::</span>  <span style="color: #228b22;">CXTranslationUnit</span>, <span style="color: #228b22;">CXFile</span>, <span style="color: #228b22;">Line</span>, <span style="color: #228b22;">Column</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXSourceLocation</span>
<span style="color: #0000ff;">clang_getRange</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CXSourceLocation</span>, <span style="color: #228b22;">CXSourceLocation</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXSourceRange</span>
<span style="color: #b22222;">-- </span><span style="color: #b22222;">location -&gt; line,column (#line is respected)</span>
<span style="color: #0000ff;">clang_getPresumedLocation</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CXSourceLocation</span>, <span style="color: #228b22;">FileName</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Line</span>, <span style="color: #228b22;">Column</span>
<span style="color: #b22222;">-- </span><span style="color: #b22222;">predicates</span>
<span style="color: #0000ff;">clang_Location_isInSystemHeader</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CXSourceLocation</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Int</span>
<span style="color: #0000ff;">clang_Location_isFromMainFile</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CXSourceLocation</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Int</span>
</pre>
</div>

<ul class="org-ul">
<li>cursor &lt;-&gt; location</li>
</ul>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">clang_getCursor</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CXTranslationUnit</span>, <span style="color: #228b22;">CXSourceLocation</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXCursor</span>
<span style="color: #0000ff;">clang_getCursorLocation</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CXCursor</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXSourceLocation</span>
<span style="color: #0000ff;">clang_getCursorExtent</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CXCursor</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXSourceRange</span>
</pre>
</div>

<ul class="org-ul">
<li>token &lt;-&gt; location</li>
</ul>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">clang_tokenize</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CXTranslationUnit</span>, <span style="color: #228b22;">CXSourceRange</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXToken</span>
<span style="color: #b22222;">-- </span><span style="color: #b22222;">get location</span>
<span style="color: #0000ff;">clang_getTokenLocation</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CXTranslationUnit</span>, <span style="color: #228b22;">CXToken</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXSourceLocation</span>
<span style="color: #0000ff;">clang_getTokenExtent</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CXTranslationUnit</span>, <span style="color: #228b22;">CXToken</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXSourceRange</span>
</pre>
</div>

<ul class="org-ul">
<li>token -&gt; cursor: you cannot get token directly from a cursor</li>
</ul>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #b22222;">-- </span><span style="color: #b22222;">roughly equivalent to clang_getCursor() with the source range</span>
<span style="color: #0000ff;">clang_annotateTokens</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CXTranslationUnit</span>, <span style="color: #228b22;">CXToken</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXCursor</span>
</pre>
</div>

<p>
Finally, you might want to know the conversion from SourceLocation to
line,column pairs. It is done through pretty strange methods.
</p>
<ul class="org-ul">
<li>context-&gt;getFullLoc(loc) -&gt; FullSourceLoc full</li>
<li>full.getSpellingLinenumber</li>
</ul>



<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">getFullLoc</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">ASTContext</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">SourceLoc</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">FullSourceLoc</span>
<span style="color: #0000ff;">getSpellingLineNumber</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">FullSourceLoc</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Unsigned</span>
</pre>
</div>

<p>
<code>SourceManager</code> can be used to get the main file ID.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">getMainFileID</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">SourceManager</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">FileID</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org35c1ee2" class="outline-3">
<h3 id="org35c1ee2"><span class="section-number-3">3.2</span> Translation unit manipulation</h3>
<div class="outline-text-3" id="text-3-2">
<p>
When using libclang, the first thing is to parse the file, i.e. create
a translation unit from a file, using some command line options. The
first seems to be better, but I don't think they have difference.
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">clang_parseTranslationUnit</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">FileName</span>, <span style="color: #228b22;">CmdArgs</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXTranslationUnit</span>
<span style="color: #0000ff;">clang_createTranslationUnitFromSourceFile</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">FileName</span>, <span style="color: #228b22;">CmdArgs</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXTranslationUnit</span>
</pre>
</div>

<p>
It can also be created from an <b>AST file</b>. It is typically emitted by
<code>-emit-ast</code>, but can also be generated using the
<code>clang_saveTranslationUnit</code> API. This is a binary file, and seems not
so interesting to me
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">clang_createTranslationUnit</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">ASTFileName</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXTranslationUnit</span>
</pre>
</div>

<p>
There's also utility to get the inclusion files.
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #b22222;">// </span><span style="color: #b22222;">this call visitor function on each included file</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">clang_getInclusions</span> (<span style="color: #228b22;">CXTranslationUnit</span> <span style="color: #a0522d;">tu</span>, <span style="color: #228b22;">CXInclusionVisitor</span> <span style="color: #a0522d;">visitor</span>, <span style="color: #228b22;">CXClientData</span> <span style="color: #a0522d;">client_data</span>)
<span style="color: #a020f0;">typedef</span> <span style="color: #228b22;">void</span> (*<span style="color: #228b22;">CXInclusionVisitor</span>) (<span style="color: #228b22;">CXFile</span> <span style="color: #a0522d;">included_file</span>, <span style="color: #228b22;">CXSourceLocation</span> *<span style="color: #a0522d;">inclusion_stack</span>, <span style="color: #228b22;">unsigned</span> <span style="color: #a0522d;">include_len</span>, <span style="color: #228b22;">CXClientData</span> <span style="color: #a0522d;">client_data</span>)
</pre>
</div>

<p>
libclang supports reading Compilation Database.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #b22222;">-- </span><span style="color: #b22222;">read database file</span>
<span style="color: #0000ff;">clang_CompilationDatabase_fromDirectory</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">BuildDir</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Cb</span>
<span style="color: #b22222;">-- </span><span style="color: #b22222;">get commands by file</span>
<span style="color: #0000ff;">clang_CompilationDatabase_getCompileCommands</span> <span style="color: #a0522d;">::</span> (<span style="color: #228b22;">Db</span>, <span style="color: #228b22;">Filename</span>) <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CMDs</span>
<span style="color: #b22222;">-- </span><span style="color: #b22222;">get all commands</span>
<span style="color: #0000ff;">clang_CompilationDatabase_getAllCompileCommands</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Db</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CMDs</span>
<span style="color: #0000ff;">clang_CompileCommands_getCommand</span> <span style="color: #a0522d;">::</span> (<span style="color: #228b22;">CMDs</span>, <span style="color: #228b22;">Int</span>) <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CMD</span>
<span style="color: #b22222;">-- </span><span style="color: #b22222;">get the 3 components</span>
<span style="color: #0000ff;">clang_CompileCommand_getDirectory</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CMD</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXString</span>
<span style="color: #0000ff;">clang_CompileCommand_getFilename</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CMD</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXString</span>
<span style="color: #0000ff;">clang_CompileCommand_getNumArgs</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CMD</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Unsigned</span>
<span style="color: #0000ff;">clang_CompileCommand_getArg</span> <span style="color: #a0522d;">::</span> (<span style="color: #228b22;">CMD</span>, <span style="color: #228b22;">Int</span>) <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXString</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-org22978f2" class="outline-3">
<h3 id="org22978f2"><span class="section-number-3">3.3</span> Token manipulation</h3>
<div class="outline-text-3" id="text-3-3">
<p>
You can get tokens from translation unit. The text and kind of token
is available.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #b22222;">-- </span><span style="color: #b22222;">get text</span>
<span style="color: #0000ff;">clang_getTokenSpelling</span> <span style="color: #a0522d;">::</span> (<span style="color: #228b22;">CXTranslationUnit</span>, <span style="color: #228b22;">CXToken</span>) <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXString</span>
<span style="color: #b22222;">-- </span><span style="color: #b22222;">kind can be: CXToken_ prefixed Punctuation, Keyword, Identifier, Literal, Comment</span>
<span style="color: #0000ff;">clang_getTokenKind</span> <span style="color: #228b22;">CXToken</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXTokenKind</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org17b68fd" class="outline-3">
<h3 id="org17b68fd"><span class="section-number-3">3.4</span> Cursors</h3>
<div class="outline-text-3" id="text-3-4">
</div>
<div id="outline-container-orgbd68d63" class="outline-4">
<h4 id="orgbd68d63"><span class="section-number-4">3.4.1</span> Traversing</h4>
<div class="outline-text-4" id="text-3-4-1">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #228b22;">unsigned</span> <span style="color: #0000ff;">clang_visitChildren</span> (<span style="color: #228b22;">CXCursor</span> <span style="color: #a0522d;">parent</span>, <span style="color: #228b22;">CXCursorVisitor</span> <span style="color: #a0522d;">visitor</span>, <span style="color: #228b22;">CXClientData</span> <span style="color: #a0522d;">client_data</span>)
<span style="color: #a020f0;">typedef</span> <span style="color: #a020f0;">enum</span> <span style="color: #228b22;">CXChildVisitResult</span>(* <span style="color: #228b22;">CXCursorVisitor</span>)
 (<span style="color: #228b22;">CXCursor</span> <span style="color: #a0522d;">cursor</span>, <span style="color: #228b22;">CXCursor</span> <span style="color: #a0522d;">parent</span>, <span style="color: #228b22;">CXClientData</span> <span style="color: #a0522d;">client_data</span>)
</pre>
</div>

<p>
Clearly the visitor is a function, accepting the cursor, parent, and
optionally some data (it is void*), and return a result indicating
continue traversal or not (in my case I would want to stop at the
expression level, for example). The result can have three values:
</p>
<ul class="org-ul">
<li><code>CXChildVisit_Break</code>: terminate</li>
<li><code>CXChildVisit_Continue</code>: to sibling, without visiting children (skipping children)</li>
<li><code>CXChildVisit_Recurse</code>: depth first for children</li>
</ul>
</div>
</div>


<div id="outline-container-org1b069f4" class="outline-4">
<h4 id="org1b069f4"><span class="section-number-4">3.4.2</span> type information</h4>
<div class="outline-text-4" id="text-3-4-2">
<p>
These are the type (e.g. float, typedef) for the a cursor. Important
ones include (prefixed with <code>CXType_</code>): <code>Void</code>, <code>Bool</code>, <code>Short</code>,
<code>Int</code>, <code>Long</code>, <code>Float</code>, <code>Double</code>, <code>Record</code>, <code>Enum</code>, <code>Typedef</code>.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">clang_getCursorType</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CXCursor</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXType</span>
<span style="color: #b22222;">-- </span><span style="color: #b22222;">pretty print the type</span>
<span style="color: #0000ff;">clang_getTypeSpelling</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CXType</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXString</span>
<span style="color: #b22222;">-- </span><span style="color: #b22222;">type conversion</span>
<span style="color: #0000ff;">clang_getCanonicalType</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CXType</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXType</span>
<span style="color: #0000ff;">clang_getTypedefName</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CXType</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXString</span>
<span style="color: #0000ff;">clang_getPointeeType</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CXType</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXType</span>
<span style="color: #0000ff;">clang_getTypeDeclaration</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CXType</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXCursor</span>
<span style="color: #b22222;">-- </span><span style="color: #b22222;">predicates</span>
<span style="color: #0000ff;">clang_isConstQualifiedType</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CXType</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Unsigned</span>
<span style="color: #0000ff;">clang_isVolatileQualifiedType</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CXType</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Unsigned</span>
<span style="color: #0000ff;">clang_isRestrictQualifiedType</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CXType</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Unsigned</span>
<span style="color: #b22222;">-- </span><span style="color: #b22222;">for function type</span>
<span style="color: #0000ff;">clang_getResultType</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CXType</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXType</span>
<span style="color: #0000ff;">clang_getNumArgTypes</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CXType</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Int</span>
<span style="color: #0000ff;">clang_getArgType</span> <span style="color: #228b22;">CXType</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Unsigned</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXType</span>
<span style="color: #b22222;">-- </span><span style="color: #b22222;">array</span>
<span style="color: #0000ff;">clang_getElementType</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CXType</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXType</span>
<span style="color: #0000ff;">clang_getNumElements</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CXType</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Long</span> <span style="color: #228b22;">Long</span>
<span style="color: #0000ff;">clang_getArrayElementType</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CXType</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXType</span>
<span style="color: #0000ff;">clang_getArraySize</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">CXType</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Long</span> <span style="color: #228b22;">Long</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-orgd0805e7" class="outline-4">
<h4 id="orgd0805e7"><span class="section-number-4">3.4.3</span> manipulation</h4>
<div class="outline-text-4" id="text-3-4-3">
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">clang_getTranslationUnitCursor</span> <span style="color: #a0522d;">::</span> (<span style="color: #228b22;">CXTranslationUnit</span>) <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXCursor</span>
<span style="color: #0000ff;">clang_Cursor_getTranslationUnit</span> <span style="color: #a0522d;">::</span> (<span style="color: #228b22;">CXCursor</span>) <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXTranslationUnit</span>
<span style="color: #b22222;">-- </span><span style="color: #b22222;">cursor kinds can be, e.g. </span>
<span style="color: #b22222;">-- </span><span style="color: #b22222;">CXCursor_VarDecl, CXCursor_IfStmt</span>
<span style="color: #0000ff;">clang_getCursorKind</span> <span style="color: #a0522d;">::</span> (<span style="color: #228b22;">CXCursor</span>) <span style="color: #a0522d;">-&gt;</span> enum <span style="color: #228b22;">CXCursorKind</span>
<span style="color: #b22222;">-- </span><span style="color: #b22222;">some predicates</span>
<span style="color: #0000ff;">clang_isDeclaration</span> <span style="color: #a0522d;">::</span> (enum <span style="color: #228b22;">CXCursorKind</span>) <span style="color: #a0522d;">-&gt;</span> unsigned
<span style="color: #0000ff;">clang_isReference</span> <span style="color: #a0522d;">::</span> (enum <span style="color: #228b22;">CXCursorKind</span>) <span style="color: #a0522d;">-&gt;</span> unsigned
<span style="color: #0000ff;">clang_isExpression</span> <span style="color: #a0522d;">::</span> (enum <span style="color: #228b22;">CXCursorKind</span>) <span style="color: #a0522d;">-&gt;</span> unsigned
<span style="color: #0000ff;">clang_isStatement</span> <span style="color: #a0522d;">::</span> (enum <span style="color: #228b22;">CXCursorKind</span>) <span style="color: #a0522d;">-&gt;</span> unsigned
<span style="color: #b22222;">-- </span><span style="color: #b22222;">seems to be related to C++ namespace</span>
<span style="color: #0000ff;">clang_getCursorSemanticParent</span> <span style="color: #a0522d;">::</span> (<span style="color: #228b22;">CXCursor</span> cursor) <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXCursor</span>
<span style="color: #0000ff;">clang_getCursorLexicalParent</span> <span style="color: #a0522d;">::</span> (<span style="color: #228b22;">CXCursor</span> cursor) <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXCursor</span>
<span style="color: #b22222;">-- </span><span style="color: #b22222;">the cursor must be a include directive</span>
<span style="color: #0000ff;">clang_getIncludedFile</span> <span style="color: #a0522d;">::</span> (<span style="color: #228b22;">CXCursor</span> cursor) <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CXFile</span>
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org5fa16ea" class="outline-2">
<h2 id="org5fa16ea"><span class="section-number-2">4</span> LibTooling</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org878c314" class="outline-3">
<h3 id="org878c314"><span class="section-number-3">4.1</span> In-memory code parsing</h3>
<div class="outline-text-3" id="text-4-1">
<p>
LIbTooling can be used to parse code in memory or disk. The in-memory
code parsing seems to support less setup (i.e. what command line
arguments to use), and is intended to test initial results. It is
invoked through a function <code>runToolOnCode</code>, with the code as string
and an action. The function has several variations.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">runToolOnCode</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">FrontendAction</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Code</span> <span style="color: #a0522d;">-&gt;</span> bool
<span style="color: #0000ff;">runToolOnCodeWithArgs</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">FrontendAction</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Code</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Args</span> <span style="color: #a0522d;">-&gt;</span> bool
<span style="color: #0000ff;">buildASTFromCode</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Code</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">ASTUnit</span>
<span style="color: #0000ff;">buildASTFromCodeWithArgs</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Code</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Args</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">ASTUnit</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-org9d6d8a5" class="outline-3">
<h3 id="org9d6d8a5"><span class="section-number-3">4.2</span> On-disk code parsing</h3>
<div class="outline-text-3" id="text-4-2">
<p>
The real tool building of LibTooling starts by creating an instance of
<code>ClangTool</code>, with compilation database and an array of source files as
parameters. The tool can than run any number of actions called
<code>ToolAction</code>.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">run</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">ToolAction</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">()</span>
<span style="color: #0000ff;">buildASTs</span> <span style="color: #a0522d;">::</span> [<span style="color: #228b22;">ASTUnit</span>]
</pre>
</div>
</div>
</div>

<div id="outline-container-org23b44c8" class="outline-3">
<h3 id="org23b44c8"><span class="section-number-3">4.3</span> Command Line</h3>
<div class="outline-text-3" id="text-4-3">
<p>
Compilation database is supported. In general, a compilation data base
specifies what are the commands used for the files to compile. This
can be specified in the command line, or read from a file (typically
through a <code>-p</code> option).  There's of course a parser for it, called
<code>CommonOptionsParser</code>.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #a020f0;">_</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Argc</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Argv</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">CommonOptionParser</span> (<span style="color: #228b22;">Parser</span>)
<span style="color: #0000ff;">getCompilations</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Parser</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Db</span>
<span style="color: #0000ff;">getSourcePathList</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Parser</span> <span style="color: #a0522d;">-&gt;</span> [<span style="color: #228b22;">String</span>]
</pre>
</div>

<p>
Or, you can use the static functions to create the DB directly. I
believe this is a wrapper around <code>CommonOptionsParser</code>. The CMD got
from the it contains directory, filename, command line, output, as
expected.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">loadFromDirectory</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">BuildDir</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Db</span>
<span style="color: #0000ff;">loadFromFile</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">FilePath</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Db</span>
<span style="color: #0000ff;">getAllFiles</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Db</span> <span style="color: #a0522d;">-&gt;</span> [<span style="color: #228b22;">String</span>]
<span style="color: #0000ff;">getCompileCommands</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Db</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">String</span> <span style="color: #a0522d;">-&gt;</span> [<span style="color: #228b22;">CMD</span>]
</pre>
</div>

<p>
Once we got the compilation database, we basically knows how to
compile all the files in the project.
</p>
</div>
</div>

<div id="outline-container-org16f676f" class="outline-3">
<h3 id="org16f676f"><span class="section-number-3">4.4</span> FrontendAction</h3>
<div class="outline-text-3" id="text-4-4">
<p>
The Tool would run on some front-end action.  <code>FrontendAction</code>
(abstract) derives <code>ASTFrontendAction</code> (abstract) derives
<code>SyntaxOnlyAction</code> (concrete). Typically, when we work on AST, we
create a class deriving from <code>ASTFrontendAction</code>, and overwrite its
<code>CreateASTConsumer</code> interface. The <b>created</b> consumer is called on the
AST.
</p>

<p>
The Consumer would derive from <code>ASTConsumer</code> and override
<code>HandleTranslationUnit</code>. Inside this function, we got the Translation
Unit. This function is called when the whole translation unit is
parsed. This provides the entry point of the AST by the top most
<i>decl</i> by <code>Context.getTranslationUnitDecl()</code>.
</p>

<p>
You can handle the AST manually, but clang also provides a visitor
traversal helper class <code>RecursiveASTVisitor</code>. You simply create a new
instance of the visitor, and let it visit the translation unit decl.
The visitor itself implement what to do with each AST node. Override
the list of <code>VisitXXX</code> method for each type of AST node.
</p>

<p>
Under the hood, the visitor will automatically call <code>WalkUpFromXXX(x)</code>
to recursively visit child nodes of x returning false of TraverseXXX
or <code>WalkUpFromXXX</code> will terminate the traversal. By default this will
be a pre-order traversal. Calling a method to change to post-order.
</p>
</div>
</div>

<div id="outline-container-org7b51575" class="outline-3">
<h3 id="org7b51575"><span class="section-number-3">4.5</span> Type</h3>
<div class="outline-text-3" id="text-4-5">
<p>
The raw type will be whatever appeared in the source code. If a type
is a typedef to another type (may be pointer), then the "type" will
not record the pointer information.
</p>
</div>

<div id="outline-container-orgf2299ce" class="outline-4">
<h4 id="orgf2299ce"><span class="section-number-4">4.5.1</span> canonical type</h4>
<div class="outline-text-4" id="text-4-5-1">
<p>
Every instance of type has a canonical type pointer.
</p>
<ul class="org-ul">
<li>If the type is a simple primitive type, the pointer points to itself</li>
<li>If any part of the type has typedef, the pointer will point to a
type instance that is equivalent to it but without typedefs. You can
check whether two types are the same by comparing this pointer.</li>
</ul>

<p>
You should not use isa/cast/dyn<sub>cast</sub> on types
(e.g. <code>isa&lt;PointerType&gt;(expr-&gt;getType())</code>). The reason is it is not
canonical. So use help functions instead:
<code>expr-&gt;getType()-&gt;isPointerType()</code>.
</p>
</div>
</div>

<div id="outline-container-org8d9a079" class="outline-4">
<h4 id="org8d9a079"><span class="section-number-4">4.5.2</span> QualType</h4>
<div class="outline-text-4" id="text-4-5-2">
<p>
The type and its qualifiers (const, volatile, restrict) are
seperate. That is the QualType. It is designed to be small and
pass-by-value. It is essentially a pair of (Type*, bits) where the
bits stores the qualifiers.
</p>

<p>
This helps making only one type for each kind, e.g. int, const int,
volatile const int.
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #a020f0;">const</span> <span style="color: #228b22;">Type</span>* <span style="color: #0000ff;">getTypePtr</span>() <span style="color: #a020f0;">const</span>;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">Type</span>&amp; <span style="color: #a020f0;">operator</span><span style="color: #0000ff;">*</span>() <span style="color: #a020f0;">const</span>;
<span style="color: #a020f0;">const</span> <span style="color: #228b22;">Type</span>* <span style="color: #a020f0;">operator</span><span style="color: #0000ff;">-&gt;</span>() <span style="color: #a020f0;">const</span>;

<span style="color: #228b22;">SplitQualType</span> <span style="color: #0000ff;">split</span>() <span style="color: #a020f0;">const</span>;
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">SplitQualType</span> {
<span style="color: #a020f0;">public</span>:
  <span style="color: #a020f0;">const</span> <span style="color: #228b22;">Type</span> *<span style="color: #a0522d;">Ty</span>;
  <span style="color: #228b22;">Qualifiers</span> <span style="color: #a0522d;">Quals</span>;
};

<span style="color: #228b22;">bool</span> <span style="color: #0000ff;">isCanonical</span>();
<span style="color: #228b22;">QualType</span> <span style="color: #0000ff;">getCanonicalType</span>() <span style="color: #a020f0;">const</span>;
<span style="color: #228b22;">bool</span> <span style="color: #0000ff;">isNull</span>();

<span style="color: #228b22;">bool</span> <span style="color: #0000ff;">isConstQualified</span>();
<span style="color: #228b22;">bool</span> <span style="color: #0000ff;">isVolatileQualified</span>();
<span style="color: #228b22;">bool</span> <span style="color: #0000ff;">isRestrictQualified</span>();
<span style="color: #228b22;">bool</span> <span style="color: #0000ff;">hasLocalQualifiers</span>();
<span style="color: #228b22;">bool</span> <span style="color: #0000ff;">hasQualifiers</span>();

<span style="color: #228b22;">Qualifiers</span> <span style="color: #0000ff;">getQualifiers</span>();

<span style="color: #228b22;">QualType</span> <span style="color: #0000ff;">withConst</span>();
<span style="color: #228b22;">QualType</span> <span style="color: #0000ff;">withVolatile</span>();
<span style="color: #228b22;">QualType</span> <span style="color: #0000ff;">withRestrict</span>();

<span style="color: #228b22;">void</span> <span style="color: #0000ff;">dump</span>();
<span style="color: #008b8b;">std</span>::<span style="color: #228b22;">string</span> <span style="color: #0000ff;">getAsString</span>();

<span style="color: #a020f0;">static</span> <span style="color: #008b8b;">std</span>::<span style="color: #228b22;">string</span> <span style="color: #0000ff;">getAsString</span>(<span style="color: #228b22;">SplitQualType</span> <span style="color: #a0522d;">split</span>);
<span style="color: #a020f0;">static</span> <span style="color: #008b8b;">std</span>::<span style="color: #228b22;">string</span> <span style="color: #0000ff;">getAsString</span>(<span style="color: #a020f0;">const</span> <span style="color: #228b22;">Type</span> *<span style="color: #a0522d;">ty</span>, <span style="color: #228b22;">Qualifiers</span> <span style="color: #a0522d;">qs</span>);
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-org9c488f4" class="outline-3">
<h3 id="org9c488f4"><span class="section-number-3">4.6</span> Clang AST</h3>
<div class="outline-text-3" id="text-4-6">
<p>
Declarations contains two parts, the <code>Decl</code> class, and the
<code>DeclContext</code>. From the Decl, you can get the context by
<code>getDeclContext</code>.  <code>Decl</code> supports getting location and kind.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">getLocStart</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">()</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Loc</span>
<span style="color: #0000ff;">getLocEnd</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">()</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Loc</span>
<span style="color: #0000ff;">getLocation</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">()</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Loc</span>
<span style="color: #0000ff;">getKind</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">()</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Kind</span>
</pre>
</div>

<p>
<code>DeclContext</code> basically is a block of statements. It provides support
of iterating children nodes. Thus the classes deriving from it
includes: <code>BlockDecl</code>, <code>FunctionDecl</code>, <code>EnumDecl</code>, <code>RecordDecl</code>,
<code>TranslationUnitDecl</code>.  Some notes: in clang in general, the
<code>XXX_range</code> will provide two method: <code>begin</code> and <code>end</code>.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">decls</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">DeclContext</span> <span style="color: #a0522d;">-&gt;</span> decl_range
<span style="color: #0000ff;">decls_begin</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">DeclContext</span> <span style="color: #a0522d;">-&gt;</span> decl_iterator
<span style="color: #0000ff;">decls_end</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">DeclContext</span> <span style="color: #a0522d;">-&gt;</span> decl_iterator
</pre>
</div>

<p>
The most important class under <code>Decl</code> is <code>NamedDecl</code>, containing two
main classes: <code>ValueDecl</code> and <code>TypeDecl</code>.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #b22222;">-- </span><span style="color: #b22222;">NamedDecl</span>
<span style="color: #0000ff;">getIdentifier</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">NamedDecl</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">IdInfo</span>
<span style="color: #0000ff;">getName</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">NamedDecl</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">String</span>
<span style="color: #b22222;">-- </span><span style="color: #b22222;">ValueDecl</span>
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">NamedDecl</span> <span style="color: #a0522d;">=&gt;</span> <span style="color: #228b22;">ValueDecl</span>
<span style="color: #0000ff;">getType</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">ValueDecl</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Type</span>
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">ValueDecl</span> <span style="color: #a0522d;">=&gt;</span> <span style="color: #228b22;">EnumConstantDecl</span>
<span style="color: #0000ff;">getInitVal</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">EnumConstantDecl</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Int</span>
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">ValueDecl</span> <span style="color: #a0522d;">=&gt;</span> <span style="color: #228b22;">DeclaratorDecl</span>
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">DeclaratorDecl</span> <span style="color: #a0522d;">=&gt;</span> <span style="color: #228b22;">FunctionDecl</span>
<span style="color: #0000ff;">getReturnTypeSourceRange</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">FunctionDecl</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">SourceRange</span>
<span style="color: #0000ff;">getNameInfo</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">FunctionDecl</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">NameInfo</span>
<span style="color: #0000ff;">getBody</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">FunctionDecl</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Stmt</span>
<span style="color: #0000ff;">parameters</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">FunctionDecl</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">ParmVarDecl</span>
<span style="color: #0000ff;">getReturnType</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">FunctionDecl</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">QualType</span>

<span style="color: #a020f0;">class</span> <span style="color: #228b22;">DeclaratorDecl</span> <span style="color: #a0522d;">=&gt;</span> <span style="color: #228b22;">FieldDecl</span>
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">DeclaratorDecl</span> <span style="color: #a0522d;">=&gt;</span> <span style="color: #228b22;">VarDecl</span>
<span style="color: #0000ff;">isStaticLocal</span> <span style="color: #a0522d;">::</span> <span style="color: #a0522d;">-&gt;</span> bool
<span style="color: #0000ff;">hasExternalStorage</span> <span style="color: #a0522d;">::</span> <span style="color: #a0522d;">-&gt;</span> bool
<span style="color: #0000ff;">hasGlobalStorage</span> <span style="color: #a0522d;">::</span> <span style="color: #a0522d;">-&gt;</span> bool
<span style="color: #0000ff;">hasInit</span> <span style="color: #a0522d;">::</span> <span style="color: #a0522d;">-&gt;</span> bool
<span style="color: #0000ff;">getInit</span> <span style="color: #a0522d;">::</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Expr</span>
<span style="color: #0000ff;">getStorageClass</span> <span style="color: #a0522d;">::</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">StorageClass</span>
<span style="color: #b22222;">-- </span><span style="color: #b22222;">TypeDecl</span>
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">NamedDecl</span> <span style="color: #a0522d;">=&gt;</span> <span style="color: #228b22;">TypeDecl</span>
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">TypeDecl</span> <span style="color: #a0522d;">=&gt;</span> <span style="color: #228b22;">TypedefNameDecl</span>
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">TypeDecl</span> <span style="color: #a0522d;">=&gt;</span> <span style="color: #228b22;">TypedefDecl</span>
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">TypeDecl</span> <span style="color: #a0522d;">=&gt;</span> <span style="color: #228b22;">TagDecl</span>
<span style="color: #0000ff;">getKindName</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">TagDecl</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">String</span>
<span style="color: #0000ff;">getTagKind</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">TagDecl</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Kind</span>
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">TagDecl</span> <span style="color: #a0522d;">=&gt;</span> <span style="color: #228b22;">EnumDecl</span> <span style="color: #b22222;">-- </span><span style="color: #b22222;">struct, union, enum</span>
<span style="color: #0000ff;">enumerators</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">EnumDecl</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Range</span>
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">TagDecl</span> <span style="color: #a0522d;">=&gt;</span> <span style="color: #228b22;">RecordDecl</span> <span style="color: #b22222;">-- </span><span style="color: #b22222;">struct, union</span>
<span style="color: #0000ff;">fields</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">RecordDecl</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Range</span>
</pre>
</div>

<p>
Every <code>Stmt</code> has <code>children</code> method, seemingly regardless of whether it
can have a child. Very common classes here.
</p>

<table border="2" cellspacing="2" cellpadding="6" rules="groups" frame="border">


<colgroup>
<col  class="org-left" />
</colgroup>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Class</th>
<th scope="col" class="org-left">method</th>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">BreakStmt</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">ReturnStmt</td>
<td class="org-left">getRetValue</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">ContinueStmt</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">IfStmt</td>
<td class="org-left">getInit</td>
<td class="org-left">getCond</td>
<td class="org-left">getThen</td>
<td class="org-left">getElse</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">SwitchCase</td>
<td class="org-left">getNextCase</td>
<td class="org-left">getSubStmt</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&gt; CaseStmt</td>
<td class="org-left">getLHS</td>
<td class="org-left">getRHS</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&gt; DefaultStmt</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">SwitchStmt</td>
<td class="org-left">getCondVar</td>
<td class="org-left">getInit</td>
<td class="org-left">getCond</td>
<td class="org-left">getBody</td>
<td class="org-left">getCaseList</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">LabelStmt</td>
<td class="org-left">getDecl</td>
<td class="org-left">getName</td>
<td class="org-left">getSubStmt</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">GotoStmt</td>
<td class="org-left">getLabel</td>
<td class="org-left">getGotoLoc</td>
<td class="org-left">getLabelLoc</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">DoStmt</td>
<td class="org-left">getCond</td>
<td class="org-left">getBody</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">ForStmt</td>
<td class="org-left">getCondVar</td>
<td class="org-left">getInit</td>
<td class="org-left">getCond</td>
<td class="org-left">getInc</td>
<td class="org-left">getBody</td>
</tr>

<tr>
<td class="org-left">WhileStmt</td>
<td class="org-left">getCondVar</td>
<td class="org-left">getCond</td>
<td class="org-left">getBody</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">CompoundStmt</td>
<td class="org-left">body</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">DeclStmt</td>
<td class="org-left">decls</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
Expressions in Clang.
</p>

<p>
First, we can check the value type of the expression.
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">isLValue</span> <span style="color: #a0522d;">::</span> <span style="color: #a0522d;">-&gt;</span> bool
<span style="color: #0000ff;">isXValue</span> <span style="color: #a0522d;">::</span> <span style="color: #a0522d;">-&gt;</span> bool
<span style="color: #0000ff;">isGLValue</span> <span style="color: #a0522d;">::</span> <span style="color: #a0522d;">-&gt;</span> bool
</pre>
</div>

<table border="2" cellspacing="2" cellpadding="6" rules="groups" frame="border">


<colgroup>
<col  class="org-left" />
</colgroup>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>

<colgroup>
<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Class</th>
<th scope="col" class="org-left">Method</th>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">Note</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">CallExpr</td>
<td class="org-left">getCallee</td>
<td class="org-left">getArgs</td>
<td class="org-left">getReturnType</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">BinaryOperator</td>
<td class="org-left">getOpcode</td>
<td class="org-left">getLHS</td>
<td class="org-left">getRHS</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">CastExpr</td>
<td class="org-left">getCastKind</td>
<td class="org-left">getSubExpr</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&gt; ExplicitCastExpr</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&gt; ImplicitCastExpr</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">ParenExpr</td>
<td class="org-left">getSubExpr</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">does NOT include conditionals</td>
</tr>

<tr>
<td class="org-left">MemberExpr</td>
<td class="org-left">getBase</td>
<td class="org-left">getMemberDecl</td>
<td class="org-left">getNameInfo</td>
<td class="org-left">isArrow</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">UnaryOperator</td>
<td class="org-left">getOpcode</td>
<td class="org-left">getSubExpr</td>
<td class="org-left">isPrefix</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">DeclRefExpr</td>
<td class="org-left">getDecl</td>
<td class="org-left">getNameInfo</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">A reference to a declared variable, function, enum</td>
</tr>

<tr>
<td class="org-left">ConditionalOperator</td>
<td class="org-left">getCond</td>
<td class="org-left">getTrueExpr</td>
<td class="org-left">getFalseExpr</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">?: ternary operator.</td>
</tr>
</tbody>
</table>

<p>
ImplicitCastExpr appears very often because it represent many type of
cast. For example
</p>
<ul class="org-ul">
<li>call a function needs to use the cast FunctionToPointerDecay</li>
<li>use a value in the righ hand side will need the cast LValueToRValue</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgf83aa6e" class="outline-2">
<h2 id="orgf83aa6e"><span class="section-number-2">5</span> Lexer</h2>
<div class="outline-text-2" id="text-5">
<p>
Use lexer when you want to get the token level information, such as
raw source code.
</p>

<p>
The <code>getExpansionLocation</code> family can support macro, otherwise you
will get a location in the macro definition file.
</p>

<p>
There's a class called <code>Rewriter</code>. It is used like this. However, this
will have bug when generating a <code>TypedefNameDecl</code>, resulting in part
of seemingly binary data. It might cause other problems.
</p>

<div class="org-src-container">
<pre class="src src-C++">  <span style="color: #228b22;">Rewriter</span> <span style="color: #a0522d;">rewriter</span>;
  rewriter.setSourceMgr(src_mgr, LangOptions());
  <span style="color: #228b22;">StringRef</span> <span style="color: #a0522d;">str</span> = rewriter.getRewrittenText(range);
</pre>
</div>

<p>
The most reliable way is to use Lexer. It has a static method
getSourceText that generate text from a <code>CharSourceRange</code>. You can get
<code>CharSourceRange</code> from <code>SourceRange</code> using <code>getCharRange</code> method, no
problem. However, note that clang has two concepts of source range:
the token source range and the character source range. Token source
range is typically used in AST, and meant to be the <b>start of
token</b>. So a typical source range in AST's perspective will be the
beginning locations of the begin and end token. When converting this
directly to char source range, you are guaranteed to miss the last
token. The correct way is to first convert the end location to <i>the
end of the token</i>, using <code>getLocForEndOfToken</code>. Be careful that don't
call this twice.
</p>

<p>
The Lexer provides a method <code>getAsCharRange</code> that seems to want to do
exactly this. There is probably a clang bug though. In
<code>Lexer::getAsCharRange</code>, the <code>getLocForEndOfToken</code> is called, but when
constructing <code>CharSourceRange</code>, the end is adjusted by
<code>getLocWithOffset(-1)</code>, and cause the getSourceText to miss one
character.
</p>

<div class="org-src-container">
<pre class="src src-C++">end = <span style="color: #008b8b;">Lexer</span>::getLocForEndOfToken(end, 0, mgr, LangOptions());
<span style="color: #228b22;">CharSourceRange</span> <span style="color: #a0522d;">char_range</span> = <span style="color: #008b8b;">CharSourceRange</span>::getCharRange(begin, end);
<span style="color: #228b22;">StringRef</span> <span style="color: #a0522d;">text</span> = <span style="color: #008b8b;">Lexer</span>::getSourceText(char_range, mgr, LangOptions());
</pre>
</div>
</div>
</div>



<div id="outline-container-orgc56f65c" class="outline-2">
<h2 id="orgc56f65c"><span class="section-number-2">6</span> Reference</h2>
<div class="outline-text-2" id="text-6">
<ul class="org-ul">
<li>A article as tutorial:
<a href="http://bastian.rieck.ru/blog/posts/2016/baby_steps_libclang_function_extents/">http://bastian.rieck.ru/blog/posts/2016/baby_steps_libclang_function_extents/</a></li>
<li>a repo of samples: <a href="https://github.com/eliben/llvm-clang-samples">https://github.com/eliben/llvm-clang-samples</a></li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Hebi Li</p>
<p class="date">Created: 2018-01-04 Thu 21:28</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
